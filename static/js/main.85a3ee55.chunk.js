(this["webpackJsonpjapanese-reading"]=this["webpackJsonpjapanese-reading"]||[]).push([[0],{109:function(e,a,t){e.exports=t(127)},118:function(e,a,t){},119:function(e,a,t){},121:function(e,a,t){},122:function(e,a,t){},123:function(e,a,t){},124:function(e,a,t){},125:function(e,a,t){},127:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),i=t.n(o),c=t(21),s=t(40),l=t(82);t(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=t(7),m=t(83),d=t(11),p=t(12),h=t(16),g=t(15),E=(t(68),t(77),function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(){return Object(d.a)(this,t),a.apply(this,arguments)}return Object(p.a)(t,[{key:"render",value:function(){var e="card  ".concat(this.props.cardState," ").concat(this.props.wordCompleted?"card-button":"");return r.a.createElement("div",{className:e,onClick:this.props.onClickCard},r.a.createElement("h1",{className:"char"},this.props.char))}}]),t}(r.a.Component)),f=t(164),C="https://localhost:3000/register",v="https://localhost:3000/signin",y="https://s3.amazonaws.com/media.japanesereading.com/word-sound/";C="https://shrouded-harbor-11572.herokuapp.com/register",v="https://shrouded-harbor-11572.herokuapp.com/signin";var j=function(e,a){return{type:"CHAR_UPDATE",currentJapChar:e,currentRomaji:a}},w=function(e,a){var t=a.map((function(e){return""}));return{type:"UPDATE_WORD",payload:e,romajiList:a,cardStateList:t}},b=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).componentDidMount=function(){n.props.setNewWordTime(Date.now())},n.componentDidUpdate=function(e){JSON.stringify(n.props.charsToRead)!==JSON.stringify(e.charsToRead)&&n.props.setNewWordTime(Date.now())},n.setCardState=function(e,a){var t=n.props,r=t.indexCurrentCard,o=t.cardStateList,i=t.onHintedCard,c=t.wordCompleted,s="";c&&""!==n.props.clickedJapChar&&(s=a===n.props.clickedJapChar?s.concat(" clicked "):s.concat(" o-100 ")),s=e===r?s.concat(" highlighted "):s.concat(i?" o-30 ":c?"":" o-60 ");var l=o[e];return s=s.concat(" ".concat(l," "))},n.state={dispatchTime:0},n}return Object(p.a)(t,[{key:"render",value:function(){var e=this,a=this.props.charsToRead.map((function(a,t){return r.a.createElement(f.a,{item:!0,key:t},r.a.createElement(E,{char:a.char,key:t,cardState:e.setCardState(t,a.char),onClickCard:e.props.onClickCard,wordCompleted:e.props.wordCompleted}))}));return r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:"1"},a)}}]),t}(r.a.Component),k=Object(c.b)((function(e){return{indexCurrentCard:e.changeCardState.indexCurrentCard,cardStateList:e.changeCardState.cardStateList,onHintedCard:e.changeCardState.onHintedCard,wordCompleted:e.changeCardState.wordCompleted}}),(function(e){return{setNewWordTime:function(a){e(function(e){return{type:"SET_NEW_WORD_TIME",time:e}}(a))}}}))(b),S=t(168);function O(e){this.key=e,this.parent=null,this.children={},this.end=!1}function T(){this.root=new O(null)}O.prototype.getWord=function(){for(var e=[],a=this;null!==a;)e.unshift(a.key),a=a.parent;return e.join("")},T.prototype.insert=function(e){for(var a=this.root,t=0;t<e.length;t++)a.children[e[t]]||(a.children[e[t]]=new O(e[t]),a.children[e[t]].parent=a),a=a.children[e[t]],t===e.length-1&&(a.end=!0)},T.prototype.contains=function(e){for(var a=this.root,t=0;t<e.length;t++){if(!a.children[e[t]])return!1;a=a.children[e[t]]}return a.end},T.prototype.find=function(e){for(var a=this.root,t=[],n=0;n<e.length;n++){if(!a.children[e[n]])return t;a=a.children[e[n]]}return function e(a,t){a.end&&t.unshift(a.getWord());for(var n in a.children)e(a.children[n],t)}(a,t),t};var I=function(){function e(a,t,n){var r=this;Object(d.a)(this,e),this.dict=a,this.checkFunction=t,this.buffer="",this.charTrie=new T,this.wordNotInDictAlert=n,Object.values(this.dict).forEach((function(e){r.charTrie.insert(e)}))}return Object(p.a)(e,[{key:"checkInput",value:function(e){if("clearBuffer"!==e)if(this.buffer+=e,this.charTrie.contains(this.buffer))this.checkFunction(this.buffer),this.buffer="";else{var a=this.charTrie.find(this.buffer);Array.isArray(a)&&a.length||(this.wordNotInDictAlert(),this.checkFunction(this.buffer),this.buffer="")}else this.buffer=""}}]),e}(),N={"\u30a2":"a","\u30a4":"i","\u30a6":"u","\u30a8":"e","\u30aa":"o","\u30ab":"ka","\u30ad":"ki","\u30af":"ku","\u30b1":"ke","\u30b3":"ko","\u30b5":"sa","\u30b7":"shi","\u30b9":"su","\u30bb":"se","\u30bd":"so","\u30bf":"ta","\u30c1":"chi","\u30c4":"tsu","\u30c6":"te","\u30c8":"to","\u30ca":"na","\u30cb":"ni","\u30cc":"nu","\u30cd":"ne","\u30ce":"no","\u30cf":"ha","\u30d2":"hi","\u30d5":"fu","\u30d8":"he","\u30db":"ho","\u30de":"ma","\u30df":"mi","\u30e0":"mu","\u30e1":"me","\u30e2":"mo","\u30e4":"ya","\u30e6":"yu","\u30e8":"yo","\u30e9":"ra","\u30ea":"ri","\u30eb":"ru","\u30ec":"re","\u30ed":"ro","\u30ef":"wa","\u30f2":"wo","\u30f3":"n'",clearBuffer:"clearBuffer"},L={"\u30a2":{romaji:"a",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A2.jpg",shortHint:"Find the capital 'A'"},"\u30a4":{romaji:"i",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A4.jpg",shortHint:"It looks like an <u>ea</u>gle (i)"},"\u30a6":{romaji:"u",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A6.jpg",shortHint:"\u30a6 looks like \u3046 (u)"},"\u30a8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A8.jpg",shortHint:"Imagine this is the girders an <u>e</u>ngineer would use to build buildings"},"\u30aa":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AA.jpg",shortHint:'A dude flapping open his trench coat to flash you. "<u>Oh</u> MY GOD!" you say. '},"\u30ab":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AB.jpg",shortHint:"It looks just like the Hiragana \u304b"},"\u30ad":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AD.jpg",shortHint:"A key (ki)"},"\u30af":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AF.jpg",shortHint:"A long <u>coo</u>ks's (ku) hat"},"\u30b1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B1.jpg",shortHint:"It looks like the letter <u>K</u> (ke)"},"\u30b3":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B3.jpg",shortHint:"Two 90 degrees <u>co</u>rners (ko)"},"\u30b5":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B5.jpg",shortHint:"Three <u>sa</u>rdines stacked on top of each other"},"\u30b7":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B7.jpg",shortHint:"<u>She</u> has a very werid face (shi)"},"\u30b9":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B9.jpg",shortHint:"A hanger where you hang up your fancy <u>su</u>it (su)"},"\u30bb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BB.jpg",shortHint:"It looks like the Hiragana \u305b"},"\u30bd":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BD.jpg",shortHint:"One needle and a long thread which you use to <u>sew</u> (so)"},"\u30bf":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BF.jpg",shortHint:"A <u>ti</u>dal wave racing across the sea (ta)"},"\u30c1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%81.jpg",shortHint:"A <u>chee</u>rleader doing a <u>chee</u>r (chi)"},"\u30c4":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%84.jpg",shortHint:"<u>Two</u> (tsu) needles"},"\u30c6":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%86.jpg",shortHint:"A <u>te</u>lephone pole"},"\u30c8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%88.jpg",shortHint:"A <u>to</u>tem pole"},"\u30ca":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8A.jpg",shortHint:"A majestic <u>na</u>rwhal"},"\u30cb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8B.jpg",shortHint:"Two <u>nee</u>dles (ni) laying on their side"},"\u30cc":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8C.jpg",shortHint:"The chopsticks are grabbing onto some <u>noo</u>dles & pulling them out of a bowl. (nu)"},"\u30cd":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8D.jpg",shortHint:"A <u>ne</u>cromancer has summoned this zombie"},"\u30ce":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8E.jpg",shortHint:"A really long <u>no</u>se"},"\u30cf":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8F.jpg",shortHint:"A rice paddy <u>ha</u>t"},"\u30d2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%92.jpg",shortHint:"<u>He</u> (hi) has no head. <u>He</u> is reaching out to you."},"\u30d5":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%95.jpg",shortHint:"A <u>fu</u>nny looking owl"},"\u30d8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%98.jpg",shortHint:"This looks like the Hiragana \u3078"},"\u30db":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9B.jpg",shortHint:"A <u>ho</u>ly cross"},"\u30de":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9E.jpg",shortHint:"Look at all those angles! Those lengths! All that <u>ma</u>th!"},"\u30df":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9F.jpg",shortHint:"Three <u>mi</u>ssiles, flying towards you. Be careful!"},"\u30e0":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A0.jpg",shortHint:"It is shaped like a pile of poop. Cow poop. <u>Moo</u>. (mu)"},"\u30e1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A1.jpg",shortHint:'\u3081 <u>Me</u> is Japnese for "eye"'},"\u30e2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A2.jpg",shortHint:"This looks like the Hiragana \u3082"},"\u30e4":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A4.jpg",shortHint:"This looks just like the Hiragana \u3084"},"\u30e6":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A6.jpg",shortHint:"You (yu) have a hook for a hand"},"\u30e8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A8.jpg",shortHint:"A <u>yo</u>gurt containers"},"\u30e9":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A9.jpg",shortHint:"It is a <u>ra</u>ptor wearing sweet <u>ra</u>y-bans"},"\u30ea":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AA.jpg",shortHint:"It looks like the Hiragana \u308a"},"\u30eb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AB.jpg",shortHint:"There are two <u>rou</u>tes (ru) you can take. Route 1 & Route 2."},"\u30ec":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AC.jpg",shortHint:"Look at that beautiful <u>re</u>d hair that <u>Re</u>i has!"},"\u30ed":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AD.jpg",shortHint:"This <u>ro</u>ad goes around in a square, never ending. What a terrible <u>ro</u>ad this is."},"\u30ef":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AF.jpg",shortHint:"You often begin your question with the word <u>wha</u>t (wa). <u>Wha</u>t are you doing?"},"\u30f2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B2.jpg",shortHint:"A dog <u>wo</u>ofing (wo) so hard its tongue is flying out"},"\u30f3":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B3.jpg",shortHint:"This guy only has one eye. <u>N</u>oooo!"}},R=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).componentDidUpdate=function(e){n.props.user_uid,e.user_uid},n.convertTimeToScoreDelta=function(e){return e.map((function(e){var a=2e4/e.time;return"hinted"===e.type&&(a*=-1),{char:e.char,score_delta:a,result_type:e.type,result_time:e.time}}))},n.checkFunction=function(e){var a=n.props,t=a.romajiList,r=a.indexCurrentCard,o=a.onCorrectChar,i=a.onWrongInput,c=a.onWordCompletion,s=a.currentWord,l=a.setCurrentChar,u=a.onCompleteChar;if(e===t[r]){o(),u(Date.now(),"correct");var m=t[r+1];l(s[r+1],m),r===t.length-1&&c()}else i(e,t[r])},n.onKeyDown=function(e){var a=n.props,t=a.onIncorrectCard,r=a.curWrongChar,o=a.onInputBoxChange,i=a.onSpacePress,c=a.onCompleteChar,s=a.wordCompleted,l=a.onHintedCard,u=a.currentRomaji,m=a.onEnterPress,d=a.currentWord,p=a.romajiList,h=a.indexCurrentCard,g=a.setCurrentChar,E=a.charTimestamp,f=a.updateWord,C=a.updateCharScore,v=a.updateWordScore,y=a.onWordCompletion,j=a.audioIsPlaying,w=a.user_uid,b=a.cardStateList,k=a.resetRomajiNotInDictAlert;if(j)e.preventDefault();else{s&&e.preventDefault();var S=b[b.length-1];if(h!==p.length-1||"correct"!==S&&"hinted"!==S||y(),!(e.which>=65&&e.which<=90||222===e.which)||t||s||l){if(e.preventDefault(),32===e.which)if(t)e.target.value=e.target.value.slice(0,-r.length),o(e),i("CONTINUE_AFTER_ERROR"),k();else if(t||l||s){if(s){f("",[""]),C(w,n.convertTimeToScoreDelta(E)),v(w,d),i("CONTINUE_AFTER_COMPLETE"),e.target.value="",o(e);var O=p[0];g(d[0],O)}}else i("REQUEST_HINT"),c(Date.now(),"hinted"),e.target.value=n.inputChecker.buffer.length?e.target.value.slice(0,-n.inputChecker.buffer.length):e.target.value,o(e),n.inputChecker.checkInput("clearBuffer");if(13===e.which&&l){h===p.length-1&&y(),e.target.value=e.target.value.concat(u),o(e),m(Date.now());var T=p[h+1];g(d[h+1],T)}}else{var I=222===e.which?"'":String.fromCharCode(e.which).toLowerCase();n.props.onKeyPress(I),n.inputChecker.checkInput(I)}}},n.formRef=r.a.createRef(),n.inputChecker=new I(N,n.checkFunction,n.props.alertRomajiNotInDict),n}return Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.setCurrentChar,t=e.romajiList,n=e.indexCurrentCard,r=e.currentWord,o=t[n];a(r[n],o)}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement(S.a,{placeholder:"Type here if you know it",defaultValue:this.props.inputBox,inputProps:{"aria-label":"description"},onChange:this.props.onInputBoxChange,onKeyDown:this.onKeyDown,spellCheck:!1,autoFocus:!0,inputRef:this.formRef,onPaste:function(e){e.preventDefault()}}))}}]),t}(r.a.Component),_=Object(c.b)((function(e){return{indexCurrentCard:e.changeCardState.indexCurrentCard,romajiList:e.changeCardState.romajiList,cardStateList:e.changeCardState.cardStateList,curWrongChar:e.changeCardState.curWrongChar,onIncorrectCard:e.changeCardState.onIncorrectCard,wordCompleted:e.changeCardState.wordCompleted,onHintedCard:e.changeCardState.onHintedCard,currentRomaji:e.changeCardState.currentRomaji,currentWord:e.changeCardState.currentWord,charTimestamp:e.changeCardState.charTimestamp,audioIsPlaying:e.changeGeneralState.audioIsPlaying,inputBox:e.changeInputBox.inputBox}}),(function(e){return{onInputBoxChange:function(a){e({type:"USER_INPUT",payload:a.target.value})},onKeyPress:function(a){e(function(e){return{type:"PRESS_KEY",payload:e}}(a))},onCorrectChar:function(){e({type:"INPUT_CORRECT_CHAR"})},onIncorrectChar:function(){e({type:"INPUT_INCORRECT_CHAR"})},onSpacePress:function(a){e(function(e){switch(e){case"REQUEST_HINT":return{type:"SPACE_PRESS_FOR_HINT",time:Date.now()};case"CONTINUE_AFTER_ERROR":return{type:"SPACE_PRESS_TO_CONTINUE",time:Date.now()};case"CONTINUE_AFTER_COMPLETE":return{type:"SPACE_PRESS_TO_GO_NEXT",time:Date.now()};default:return{type:"SPACE_PRESS"}}}(a))},onWrongInput:function(a,t){e(function(e,a){return{type:"WRONG_INPUT",userInput:e,currentChar:a,time:Date.now()}}(a,t))},onCompleteChar:function(a,t){e({type:"COMPLETE_CHAR",time:a,completionType:t})},onEnterPress:function(a){e(function(e){return{type:"ENTER_PRESS",time:e}}(a))},setCurrentChar:function(a,t){e(j(a,t))},updateWord:function(a,t){e(w(a,t))},onWordCompletion:function(){e({type:"COMPLETE_WORD",time:Date.now()})},alertRomajiNotInDict:function(){e({type:"ALERT_NOT_IN_DICT"})},resetRomajiNotInDictAlert:function(){e({type:"RESET_NOT_IN_DICT_ALERT"})}}}),null,{forwardRef:!0})(R),A=t(64),P=t(170),H=t(171),x=t(66),W=t(172),D=t(169),M=(t(119),t(189)),B=t(176),z=t(174),J=t(175),U=t(173),F=t(90),K=t.n(F),G=t(88),Y=t.n(G),q=t(89),V=t.n(q),Z=t(87),Q=t.n(Z),X=Object(D.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}})),$=function(e){var a=e.onRouteChange,t=e.currentTab,n=X(),o=r.a.useState(!1),i=Object(A.a)(o,2),c=i[0],s=i[1],l=function(){s(!1)};return r.a.createElement("div",{className:n.root},r.a.createElement(P.a,{position:"static"},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h6",color:"secondary",className:n.title,align:"left"},r.a.createElement("div",{className:"navbar-title"},"Japanese vs. English words")),r.a.createElement(W.a,{variant:"text",color:"secondary",onClick:function(){s(!0)},startIcon:r.a.createElement(Q.a,null)},r.a.createElement("div",{className:"navbar-button-text"},"Help")),r.a.createElement(M.a,{open:c,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(U.a,{id:"alert-dialog-title"},"Instruction"),r.a.createElement(z.a,null,r.a.createElement(J.a,{id:"alert-dialog-description"},r.a.createElement("p",null,"In this app, you will learn Japanese Katakana alphabet. At each iteration, the app will display all the Katakana characters that make up a certain Japanese word."),r.a.createElement("p",null,"If you know the katakana, simply type romaji "),r.a.createElement("p",null,"If you don't know it, press SPACE to learn the romaji. "),r.a.createElement("p",null,"If your input is incorrect, press SPACE to retry."))),r.a.createElement(B.a,null,r.a.createElement(W.a,{onClick:l,color:"primary",autoFocus:!0},"Close"))),r.a.createElement(W.a,{variant:"home"===t?"outlined":"text",color:"secondary",onClick:function(){return a("home")},startIcon:r.a.createElement(Y.a,null)},r.a.createElement("div",{className:"navbar-button-text"},"Home")),r.a.createElement(W.a,{variant:"progress"===t?"outlined":"text",color:"secondary",onClick:function(){return a("progress")},startIcon:r.a.createElement(V.a,null)},r.a.createElement("div",{className:"navbar-button-text"},"Progress")),r.a.createElement(W.a,{color:"secondary",variant:"signout"===t?"outlined":"text",onClick:function(){return a("signin")},className:"nav-button",startIcon:r.a.createElement(K.a,null)},r.a.createElement("div",{className:"navbar-button-text"},"Signout")))))},ee=t(177),ae=t(179),te=(t(121),function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={play:!1,audio:new Audio(e.props.audioLink)},e.stopAudioHandler=function(){e.setState({play:!1}),e.props.noStoreUpdateWhenEnded||e.props.onAudioPause()},e.simpleStopAudioHandler=function(){e.setState({play:!1}),e.props.onAudioPause()},e.componentDidUpdate=function(a){if(a.audioLink!==e.props.audioLink){var t=new Audio(e.props.audioLink);t.addEventListener("ended",e.stopAudioHandler),e.setState({audio:t}),setTimeout((function(){e.state.audio.play(),e.props.onAudioPlay()}),e.props.delay)}},e.togglePlay=function(){e.setState({play:!e.state.play},(function(){e.state.play?(e.state.audio.play(),e.props.onAudioPlay(),e.state.audio.removeEventListener("ended",e.stopAudioHandler),e.state.audio.removeEventListener("ended",e.simpleStopAudioHandler),e.state.audio.addEventListener("ended",e.simpleStopAudioHandler)):(e.state.audio.pause(),e.props.onAudioPause())}))},e}return Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.audio.addEventListener("ended",this.stopAudioHandler),setTimeout((function(){e.state.audio.play(),e.props.onAudioPlay()}),this.props.delay)}},{key:"componentWillUnmount",value:function(){this.state.audio.removeEventListener("ended",this.stopAudioHandler),this.state.audio.removeEventListener("ended",this.simpleStopAudioHandler),this.props.onAudioPause()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W.a,{variant:"contained",color:"primary",onClick:this.togglePlay,className:"music-button"},r.a.createElement("div",{className:"button-text"},this.state.play?"Pause Audio":"Play Audio")))}}]),t}(r.a.Component)),ne=Object(c.b)((function(e){return{audioIsPlaying:e.changeGeneralState.audioIsPlaying}}),(function(e){return{onAudioPlay:function(){e({type:"PLAY_AUDIO"})},onAudioPause:function(){e({type:"PAUSE_AUDIO"})}}}))(te),re=t(178),oe=(t(122),function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(){return Object(d.a)(this,t),a.apply(this,arguments)}return Object(p.a)(t,[{key:"render",value:function(){var e=N[this.props.currentHintedChar],a=L[this.props.currentHintedChar].shortHint.replace(/<\/?u>/g,",").split(","),t="https://s3.amazonaws.com/media.japanesereading.com/character-sound/kanasound-"+("n'"===e?"n":e)+".mp3";return r.a.createElement(ee.a,{className:"hint-card",onClick:this.onClickHandler},r.a.createElement("div",{className:"hint-card-content"},r.a.createElement("h3",{className:"hint-card-romaji"},e),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("img",{src:"".concat(L[this.props.currentHintedChar].imageLink),className:"hint-card-image",alt:"Hint Card"})),r.a.createElement(ae.a,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement(x.a,{variant:"body2",component:"p"},r.a.createElement("div",{className:"hint-text"},a[0],r.a.createElement("u",null,a[1]),a[2])),r.a.createElement(ne,{audioLink:t,delay:0,noStoreUpdateWhenEnded:!1}))))}}]),t}(r.a.Component)),ie=t(94),ce=t(37),se=t(181),le=t(186),ue=t(182),me=t(188),de=t(183),pe=t(180),he=t(4),ge=(t(79),function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).onEmailInput=function(e){n.setState({signInEmail:e.target.value,emailErrorMsg:""})},n.onPasswordInput=function(e){n.setState({signInPassword:e.target.value,passwordErrorMsg:""})},n.sendSigninInfoToBackend=function(){var e=n.state,a=e.signInEmail,t=e.signInPassword;fetch(v,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:t})}).then((function(e){return e.json()})).then((function(e){4===Object.keys(e).length?(n.props.loadUser(e),n.props.onRouteChange("home"),n.setState({emailErrorMsg:"",passwordErrorMsg:""})):(console.log("Login Failed",e),"email is not yet registered"===e?n.setState({emailErrorMsg:e}):"incorrect password"===e&&n.setState({passwordErrorMsg:e,emailErrorMsg:""}))})).catch((function(e){console.log("Error!",e)}))},n.onSignIn=function(e){e.preventDefault();var a=n.state,t=a.signInEmail,r=a.signInPassword;t?n.setState({emailErrorMsg:""}):n.setState({emailErrorMsg:"please fill out your email"}),r?n.setState({passwordErrorMsg:""}):n.setState({passwordErrorMsg:"please fill out your password"}),t&&r&&n.sendSigninInfoToBackend()},n.state={signInEmail:"",signInPassword:"",emailErrorMsg:"",passwordErrorMsg:""},n}return Object(p.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{className:"signin-box"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"title"},"JapanEZ"),r.a.createElement("p",{className:"subtitle"},"Learn Japanese Katakana as you explore English-like Japanese words")),r.a.createElement("div",{className:"signin"},r.a.createElement(ie.a,{className:a.paper2,elevation:3},r.a.createElement(pe.a,{component:"main",maxWidth:"xs",className:a.container},r.a.createElement(se.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(le.a,{error:this.state.emailErrorMsg,helperText:this.state.emailErrorMsg,variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.onEmailInput}),r.a.createElement(le.a,{error:this.state.passwordErrorMsg,helperText:this.state.passwordErrorMsg,variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onPasswordInput}),r.a.createElement(ue.a,{control:r.a.createElement(me.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:this.onSignIn,style:{color:"white"}},"Sign In"),r.a.createElement(f.a,{container:!0,alignItems:"center",direction:"column",justify:"center"},r.a.createElement(f.a,{item:!0},"Don't have an account? ",r.a.createElement(de.a,{component:"button",variant:"body2",onClick:function(){return e.props.onRouteChange("register")}},"Sign Up"))))))))),r.a.createElement("div",{className:"info-panel"},r.a.createElement("div",{className:"flex-container-inner"},r.a.createElement("div",null,r.a.createElement("h2",null,"Tailored to your learning progress"),r.a.createElement("p",null,"Assesses your progress as you use the tool, and gives you the right content to learn."," "),r.a.createElement("p",null,"Either you've just started out or you've been learning for a while, the tool helps you master Katakana in an effective way.")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Built-in mnemonics and smart feedback"),r.a.createElement("p",null,"Built-in mnemonics and smart feedback"),r.a.createElement("p",null,"Receive contextual feedback when you input the wrong character.")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Words that sound like English"),r.a.createElement("p",null,"Such as kisu (kiss), in'teru (intelligent)."),r.a.createElement("p",null,"You'd be surprised how much Japanese you've already \"known\".")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Learn real common Japanese words"),r.a.createElement("p",null,"You can listen to audio from native speakers."),r.a.createElement("p",null,"This helps you compare and contrast the pronunciation of Japanese and English."),r.a.createElement("p",null,"You can also see and hear how a word appears in a sentence.")))))}}]),t}(r.a.Component)),Ee=Object(he.a)((function(e){return{container:{fontFamily:"Roboto",backfround:"white"},paper:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},paper2:Object(ce.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(1)},e.breakpoints.up(600+2*e.spacing(2)),{width:500,height:450,marginLeft:"auto",marginRight:"auto"}),form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(ge),fe=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).onNameInput=function(e){n.setState({name:e.target.value,nameErrorMsg:""})},n.onEmailInput=function(e){n.setState({email:e.target.value,emailErrorMsg:""})},n.onPasswordInput=function(e){n.setState({password:e.target.value,passwordErrorMsg:""})},n.sendFormDataToBackEnd=function(){var e=n.state,a=e.name,t=e.email,r=e.password;fetch(C,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:t,password:r})}).then((function(e){return e.json()})).then((function(e){4===Object.keys(e).length?(n.setState({emailErrorMsg:""}),n.props.loadUser(e),n.props.onRouteChange("home")):n.setState({emailErrorMsg:e})})).catch((function(e){console.log("Error!",e)}))},n.onFormSubmit=function(e){e.preventDefault();var a=n.state,t=a.name,r=a.email,o=a.password;t?n.setState({nameErrorMsg:""}):n.setState({nameErrorMsg:"please fill out your name"}),r?n.setState({emailErrorMsg:""}):n.setState({emailErrorMsg:"please fill out your email"}),o?n.setState({passwordErrorMsg:""}):n.setState({passwordErrorMsg:"please fill out your password"}),n.validateEmail(r)?(n.setState({emailErrorMsg:""}),t&&o&&r&&n.sendFormDataToBackEnd()):n.setState({emailErrorMsg:"please enter a valid email address"})},n.state={name:"",email:"",password:"",nameError:!1,emailError:!1,passwordError:!1,nameErrorMsg:"",emailErrorMsg:"",passwordErrorMsg:""},n}return Object(p.a)(t,[{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.nameErrorMsg,o=t.emailErrorMsg,i=t.passwordErrorMsg;return r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{className:"signin-box"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"title"},"JapanEZ"),r.a.createElement("p",{className:"subtitle"},"Learn Japanese Katakana as you explore English-like Japanese words")),r.a.createElement("div",{className:"signin"},r.a.createElement(ie.a,{className:a.paper2},r.a.createElement(pe.a,{component:"main",maxWidth:"xs",className:a.container},r.a.createElement(se.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(x.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(le.a,{error:n,helperText:n,variant:"outlined",id:"name",label:"Your Name",fullWidth:!0,onChange:this.onNameInput}),r.a.createElement(le.a,{error:o,helperText:o,variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.onEmailInput}),r.a.createElement(le.a,{error:i,helperText:i,variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onPasswordInput}),r.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:this.onFormSubmit,style:{color:"#ffffff"}},"Register"),r.a.createElement(f.a,{container:!0,alignItems:"center",direction:"column",justify:"center"},r.a.createElement(f.a,{item:!0},"Already registered? ",r.a.createElement(de.a,{component:"button",variant:"body2",onClick:function(){return e.props.onRouteChange("signin")}},"Sign In"))))))))),r.a.createElement("div",{className:"info-panel"},r.a.createElement("div",{className:"flex-container-inner"},r.a.createElement("div",null,r.a.createElement("h2",null,"Tailored to your learning progress"),r.a.createElement("p",null,"Assesses your progress as you use the tool, and gives you the right content to learn. Either you've just started out or you've been learning for a while, the tool helps you master Katakana in an effective way.")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Built-in mnemonics and smart feedback"),r.a.createElement("p",null,"Built-in mnemonics and smart feedback"),r.a.createElement("p",null,"Receive contextual feedback when you input the wrong character.")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Words that sound like English"),r.a.createElement("p",null,"Such as kisu (kiss), in'teru (intelligent). You'd be surprised how much Japanese you've already \"known\".")),r.a.createElement(re.a,null),r.a.createElement("div",null,r.a.createElement("h2",null,"Learn real common Japanese words"),r.a.createElement("p",null,"You can listen to audio from native speakers. This helps you compare and contrast the pronunciation of Japanese and English. You can also see and hear how a word appears in a sentence.")))))}}]),t}(r.a.Component),Ce=Object(he.a)((function(e){return{container:{fontFamily:"Roboto",backfround:"white"},paper:{marginTop:e.spacing(5),display:"flex",flexDirection:"column",alignItems:"center"},paper2:Object(ce.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(1)},e.breakpoints.up(600+2*e.spacing(2)),{width:500,height:450,marginLeft:"auto",marginRight:"auto"}),form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(fe),ve=(t(123),Object(D.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12}}));function ye(e){var a=e.wordInfo,t=e.word_audio_duration,n=ve();document.createElement("html").innerHTML="<b>bolded text</b>";var o=a.sentence_expression.replace(/<\/?b>/g,",").split(","),i=function(e){return e.slice(7,e.length-1)};return r.a.createElement(ee.a,{className:"".concat(n.root," word-card ")},r.a.createElement(ae.a,null,r.a.createElement(x.a,{className:n.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("div",{className:"wordcard-subtext"},"Word Meaning")),r.a.createElement(x.a,{variant:"h5",component:"h2"},r.a.createElement("div",{className:"wordcard-text"},a.vocab_meaning," (",a.vocab_pos,")")),r.a.createElement(ne,{audioLink:"".concat(y).concat(i(a.vocab_sound_local)),delay:0,noStoreUpdateWhenEnded:!0}),r.a.createElement(re.a,{style:{marginTop:"calc(5px + 0.5vh)"}}),r.a.createElement(x.a,{className:n.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("div",{className:"wordcard-subtext"},"Sample Sentence")),r.a.createElement(x.a,{variant:"h5",component:"h2"},r.a.createElement("div",{className:"wordcard-text"},o[0],r.a.createElement("b",{className:"vocab-word"},o[1]),o[2])),r.a.createElement(ne,{audioLink:"".concat("https://s3.amazonaws.com/media.japanesereading.com/sentence-sound/").concat(i(a.sentence_sound_local)),delay:1e3*t+750,noStoreUpdateWhenEnded:!1}),r.a.createElement(re.a,{style:{marginTop:"calc(5px + 0.5vh)"}}),r.a.createElement(x.a,{className:n.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("div",{className:"wordcard-subtext"},"Sentence Meaning")),r.a.createElement(x.a,{variant:"body2",component:"p"},r.a.createElement("div",{style:{fontSize:"calc(12px + 0.4vh)"}},a.sentence_meaning))))}var je=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).componentDidMount=function(){document.addEventListener("mousedown",e.handleClickOutside)},e.componentWillUnmount=function(){document.addEventListener("mousedown",e.handleClickOutside)},e.setWrapperRef=function(a){e.wrapperRef=a},e.handleClickOutside=function(a){e.wrapperRef&&!e.wrapperRef.contains(a.target)&&setTimeout((function(){e.props.focusInputBox()}),0)},e}return Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{ref:this.setWrapperRef},this.props.children)}}]),t}(r.a.Component),we=(t(124),function(){return r.a.createElement("div",{className:"main-footer"},r.a.createElement("div",null,r.a.createElement("p",null,"Mnemonics taken from ",r.a.createElement("a",{href:"https://www.tofugu.com/japanese/learn-katakana/"},"tofugu.com")),r.a.createElement("p",null,"Japanese words taken from"," ",r.a.createElement("a",{href:"https://www.reddit.com/r/LearnJapanese/comments/s2iop/heres_a_spreadsheet_of_the_6000_most_common/c4ak0xd/"},"reddit.com/r/LearnJapanese"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"copyright"},r.a.createElement("small",null,"Copyright \xa9 2020 Tuan Le, Lien Tran. All Rights Reserved.")))}),be=(t(125),function(e){var a=e.userName;return r.a.createElement("div",{className:"container",style:{color:"#5D5D5D"}},r.a.createElement(ie.a,{elevation:0}),r.a.createElement("div",{className:"welcome-text"},r.a.createElement("p",null,"Welcome, ",a,"! "),r.a.createElement("ul",null,r.a.createElement("li",null,"Press SPACE to learn the character in the highlighted card"),r.a.createElement("li",null,"Type the character as fast as you can if you've already known the character"))))}),ke=(t(80),t(190)),Se=Object(D.a)((function(e){return{typography:{padding:e.spacing(2)},cardBG:{background:function(e){return 0===e.correctPercent&&0===e.hintedPercent?"#d6d6d6":"linear-gradient(0deg, green 0% ".concat(e.correctPercent,"%, #f2b50c ").concat(e.correctPercent,"% ").concat(e.hintedPercent,"%)")}}}}));var Oe=function(e){var a=e.char,t=e.correctNum,n=e.hintedNum,o=Se(e),i=r.a.useState(null),c=Object(A.a)(i,2),s=c[0],l=c[1],u=Boolean(s),m=u?"simple-popover":void 0;return r.a.createElement("div",null,r.a.createElement("div",{className:"noselect flipcard",id:m,onClick:function(e){l(e.currentTarget)}},r.a.createElement("div",{className:"flipcard-content"},r.a.createElement("div",{className:"flipcard-front ".concat(o.cardBG)},r.a.createElement("span",null,r.a.createElement("b",null,a))),r.a.createElement("div",{className:"flipcard-back"},r.a.createElement("p",null,t," ",r.a.createElement("span",{className:"dot correct-color"})),r.a.createElement("p",null,n," ",r.a.createElement("span",{className:"dot hinted-color"}))))),r.a.createElement(ke.a,{id:m,open:u,anchorEl:s,onClose:function(){l(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(x.a,{className:o.typography},"".concat(t," correct, ").concat(n," hinted"))))},Te=t(184),Ie=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).requestGetCharScore=function(){fetch("https://shrouded-harbor-11572.herokuapp.com/getcharscore",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:n.props.user_uid})}).then((function(e){return e.json()})).then((function(e){n.setState({charResultList:e})})).catch((function(e){console.log("Error in getting characters' familiarity",e)}))},n.componentDidMount=function(){n.requestGetCharScore()},n.computeCorrectPercentage=function(e){var a=0;return 0===e.length?-1:(e.forEach((function(e){"correct"===e&&(a+=1)})),Math.round(a/e.length*100))},n.computeCorrectNum=function(e){return 0===e.length?0:e.reduce((function(e,a){return"correct"===a&&(e+=1),e}),0)},n.state={charResultList:{}},n}return Object(p.a)(t,[{key:"render",value:function(){var e=this;if(0===Object.keys(this.state.charResultList).length)return r.a.createElement("div",null,r.a.createElement("div",null,"Fetching Data..."),r.a.createElement(Te.a,null));var a=Object.keys(N).map((function(a,t){if("clearBuffer"!==a){var n=0,o=0,i=e.computeCorrectNum(e.state.charResultList[a]),c=e.state.charResultList[a].length-i;return Object.keys(e.state.charResultList).length>0&&(o=100-(n=e.computeCorrectPercentage(e.state.charResultList[a])),-1===n&&(n=0,o=0)),r.a.createElement(f.a,{item:!0,key:t},r.a.createElement(Oe,{char:a,key:t,hintedPercent:o,correctPercent:n,correctNum:i,hintedNum:c}))}return null}));return r.a.createElement("div",{className:"characters-list"},r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:"2"},a))}}]),t}(r.a.Component),Ne=t(43),Le=t.n(Ne);Le.a.init("zskhtw/japanese-learning");var Re=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).componentDidUpdate=function(e,a){n.state.userInfo.id!==a.userInfo.id&&(n.props.resetStore(),n.requestNewWord())},n.onRouteChange=function(e){n.setState({route:e})},n.parseJapaneseWord=function(e){var a,t=[],n=Object(m.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value,o=N[r]||"??";t.push({char:r,romaji:o})}}catch(i){n.e(i)}finally{n.f()}return t},n.convertTimeToScoreDelta=function(e){return e.map((function(e){var a=2e4/e.time;return"hinted"===e.type&&(a*=-1),{char:e.char,score_delta:a}}))},n.updateCharScore=function(e,a){fetch("https://shrouded-harbor-11572.herokuapp.com/charscore",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:e,charScoreDeltaList:a})}).then((function(e){return e.json()})).then((function(e){console.log("Update Char Score:",e)})).catch((function(e){console.log("Failed to update char score",e)}))},n.updateWordScore=function(e,a){fetch("https://shrouded-harbor-11572.herokuapp.com/wordscore",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:e,word:a,unix_time:n.state.currentWord_unix_time})}).then((function(e){return e.json()})).then((function(e){console.log("Update Word Score:",e),n.requestNewWord()})).catch((function(e){console.log("Failed to update word score",e)}))},n.parseAudio=function(e){return e.slice(7,e.length-1)},n.requestNewWord=function(){var e=n.props,a=e.setCurrentChar,t=e.updateWord,r=[];n.setState({clickedJapChar:""}),fetch("https://shrouded-harbor-11572.herokuapp.com/getnextword",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:n.state.userInfo.id})}).then((function(e){return e.json()})).then((function(e){var o=Date.now();r=n.parseJapaneseWord(e.vocab_kana).map((function(e){return e.romaji})),t(e.vocab_kana,r);var i=r[0],c=e.vocab_kana.charAt(0);a(c,i),n.setState({currentWordInfo:e}),n.setState({currentWord_unix_time:o}),new Audio("".concat(y).concat(n.parseAudio(e.vocab_sound_local))).addEventListener("loadedmetadata",(function(e){n.setState({word_audio_duration:e.target.duration})}))})).catch((function(e){console.log("Error in getting next word",e)}))},n.loadUser=function(e){var a=e.user_uid,t=e.name,r=e.email,o=e.joined;n.setState((function(e){var n=Object(u.a)({},e.userInfo);return n.name=t,n.id=a,n.email=r,n.joined=o,{userInfo:n}})),console.log("userInfo",n.state.userInfo),Le.a.identify(a,{name:t,email:r,joined:o})},n.focusInputBox=function(){n.charInputRef.current.formRef.current.focus()},n.onClickCard=function(e){var a=e.target.innerText;n.setState({clickedJapChar:a}),n.state.clickedJapChar===a&&n.setState({clickedJapChar:""})},n.showHint=function(){return n.props.wordCompleted&&n.state.clickedJapChar?r.a.createElement(oe,{currentHintedChar:n.state.clickedJapChar}):n.props.onHintedCard?r.a.createElement(oe,{currentHintedChar:n.props.currentJapChar}):void 0},n.displayWordInfo=function(){if(n.props.wordCompleted)return r.a.createElement(ye,{wordInfo:n.state.currentWordInfo,word_audio_duration:n.state.word_audio_duration})},n.getKeyByValue=function(e,a){return Object.keys(e).find((function(t){return e[t]===a}))},n.displayMessage=function(){var e=n.props,a=e.onIncorrectCard,t=e.curWrongChar,o=e.onHintedCard,i=e.wordCompleted,c=e.audioIsPlaying,s=e.romajiNotInDict,l=e.currentJapChar;return c?r.a.createElement("p",null,r.a.createElement("b",null,"\u266c playing audio \u266c")):a?r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,s?"The romaji ".concat(t," does not exist in the alphabet"):"The romaji ".concat(t," corresponds to ").concat(n.getKeyByValue(N,t),", not ").concat(l))),r.a.createElement("p",null,r.a.createElement("b",null,"press SPACE to try again"))):o&&!c?r.a.createElement("p",null,r.a.createElement("b",null,"press ENTER to continue")):i&&!c?r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"click on card to review mnemonic or press SPACE to continue"))):o||i?r.a.createElement("p",null):r.a.createElement("p",null,r.a.createElement("b",null,"press SPACE to learn the romaji"))},n.renderRoute=function(e){switch(e){case"progress":return r.a.createElement("div",{className:"progress-flex-container"},r.a.createElement("div",{className:"progress-flex-item1"},r.a.createElement($,{onRouteChange:n.onRouteChange,currentTab:"progress"})),r.a.createElement("div",{className:"progress-flex-item2"},r.a.createElement(Ie,{user_uid:n.state.userInfo.id})),r.a.createElement(we,null));case"signin":return r.a.createElement(Ee,{onRouteChange:n.onRouteChange,loadUser:n.loadUser});case"register":return r.a.createElement(Ce,{onRouteChange:n.onRouteChange,loadUser:n.loadUser});case"home":var a=n.props.currentWord;return r.a.createElement("div",{className:"page-container",style:{position:"relative"}},r.a.createElement("div",{className:"content-wrap"},r.a.createElement($,{onRouteChange:n.onRouteChange,currentTab:"home"}),r.a.createElement(be,{userName:n.state.userInfo.name}),r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(ie.a,{elevation:0}),r.a.createElement(je,{focusInputBox:n.focusInputBox},r.a.createElement(_,{updateCharScore:n.updateCharScore,updateWordScore:n.updateWordScore,user_uid:n.state.userInfo.id,ref:n.charInputRef})),r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(f.a,{item:!0},r.a.createElement(k,{charsToRead:n.parseJapaneseWord(a),onClickCard:n.onClickCard,clickedJapChar:n.state.clickedJapChar})),r.a.createElement("div",null,n.displayMessage()),r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:"2"},r.a.createElement(f.a,{item:!0},r.a.createElement(ie.a,{elevation:1}),n.showHint()),r.a.createElement(f.a,{item:!0},n.displayWordInfo()))))),r.a.createElement(we,null));default:return r.a.createElement("div",null,"Default")}},n.state={route:"signin",userInfo:{id:"",name:"",email:"",joined:""},currentWordInfo:null},n.charInputRef=r.a.createRef(),n}return Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"tc"},this.renderRoute(this.state.route))}}]),t}(n.Component),_e=Object(c.b)((function(e){return{currentJapChar:e.changeCardState.currentJapChar,onIncorrectCard:e.changeCardState.onIncorrectCard,curWrongChar:e.changeCardState.curWrongChar,onHintedCard:e.changeCardState.onHintedCard,wordCompleted:e.changeCardState.wordCompleted,currentWord:e.changeCardState.currentWord,charTimestamp:e.changeCardState.charTimestamp,audioIsPlaying:e.changeGeneralState.audioIsPlaying,indexCurrentCard:e.changeCardState.indexCurrentCard,romajiNotInDict:e.changeInputBox.romajiNotInDict}}),(function(e){return{setCurrentChar:function(a,t){e(j(a,t))},updateWord:function(a,t){e(w(a,t))},resetStore:function(){e({type:"RESET_STORE"})}}}))(Re),Ae=t(65),Pe={inputBox:"",keyPressed:"",romajiNotInDict:!1},He={audioIsPlaying:!1},xe={currentJapChar:"",currentRomaji:"",currentWord:"",curWrongChar:"",hintedCharList:[],wrongCharList:{},onIncorrectCard:!1,onHintedCard:!1,wordCompleted:!1,prevTimestamp:null,charTimestamp:[],allCharTimestamp:[],romajiList:[],indexCurrentCard:0,cardStateList:[]},We=t(91),De=t(185);t(126);Le.a.init("zskhtw/japanese-learning");var Me=Object(We.a)({palette:{primary:{main:"#1CB0F6"},secondary:{main:"#ffffff"}}}),Be=Object(s.c)({changeGeneralState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"PLAY_AUDIO":return Object(u.a)(Object(u.a)({},e),{},{audioIsPlaying:!0});case"PAUSE_AUDIO":return Object(u.a)(Object(u.a)({},e),{},{audioIsPlaying:!1});default:return e}},changeInputBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"USER_INPUT":return Object(u.a)(Object(u.a)({},e),{},{inputBox:a.payload});case"PRESS_KEY":return Object(u.a)(Object(u.a)({},e),{},{keyPressed:a.payload});case"RESET_STORE":return Object(u.a)(Object(u.a)({},e),{},{inputBox:"",keyPressed:""});case"ALERT_NOT_IN_DICT":return Object(u.a)(Object(u.a)({},e),{},{romajiNotInDict:!0});case"RESET_NOT_IN_DICT_ALERT":return Object(u.a)(Object(u.a)({},e),{},{romajiNotInDict:!1});default:return e}},changeCardState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"CHAR_UPDATE":return Object(u.a)(Object(u.a)({},e),{},{currentJapChar:a.currentJapChar,currentRomaji:a.currentRomaji});case"ENTER_PRESS":return e.cardStateList[e.indexCurrentCard]="hinted",Object(u.a)(Object(u.a)({},e),{},{hintedCharList:[].concat(Object(Ae.a)(e.hintedCharList),[e.currentRomaji]),onHintedCard:!1,prevTimestamp:a.time,indexCurrentCard:e.indexCurrentCard+1});case"WRONG_INPUT":return e.wrongCharList[a.currentChar]=a.userInput,e.cardStateList[e.indexCurrentCard]="incorrect",Object(u.a)(Object(u.a)({},e),{},{onIncorrectCard:!0,curWrongChar:a.userInput});case"SPACE_PRESS_TO_CONTINUE":return e.cardStateList[e.indexCurrentCard]="",Object(u.a)(Object(u.a)({},e),{},{onIncorrectCard:!1});case"SPACE_PRESS_FOR_HINT":return Object(u.a)(Object(u.a)({},e),{},{onHintedCard:!0});case"SPACE_PRESS_TO_GO_NEXT":return Object(u.a)(Object(u.a)({},e),{},{wordCompleted:!1,charTimestamp:[],allCharTimestamp:[].concat(Object(Ae.a)(e.allCharTimestamp),[e.charTimestamp]),hintedCharList:[]});case"COMPLETE_WORD":return Object(u.a)(Object(u.a)({},e),{},{wordCompleted:!0});case"UPDATE_WORD":return Object(u.a)(Object(u.a)({},e),{},{currentWord:a.payload,romajiList:a.romajiList,cardStateList:a.cardStateList,indexCurrentCard:0});case"COMPLETE_CHAR":var t={char:e.currentJapChar,time:a.time-e.prevTimestamp,type:a.completionType};return console.log("TIME STAMP",t),Object(u.a)(Object(u.a)({},e),{},{charTimestamp:[].concat(Object(Ae.a)(e.charTimestamp),[t]),prevTimestamp:a.time});case"SET_NEW_WORD_TIME":return Object(u.a)(Object(u.a)({},e),{},{prevTimestamp:a.time});case"INPUT_CORRECT_CHAR":return Object(u.a)(Object(u.a)({},e),{},{indexCurrentCard:e.indexCurrentCard+1,cardStateList:e.cardStateList.map((function(a,t){return t===e.indexCurrentCard?"correct":a}))});case"INPUT_INCORRECT_CHAR":return Object(u.a)(Object(u.a)({},e),{},{cardStateList:e.cardStateList.map((function(a,t){return t===e.indexCurrentCard?"incorrect":a}))});case"RESET_STORE":return Object(u.a)(Object(u.a)({},e),{},{allCharTimestamp:[],charTimestamp:[],curWrongChar:null,onHintedCard:!1,onIncorrectCard:!1,wordCompleted:!1,wrongCharList:{}});default:return e}}}),ze=Object(l.createLogger)(),Je=Object(s.d)(Be,Object(s.a)(ze,Le.a.reduxMiddleware()));i.a.render(r.a.createElement(c.a,{store:Je},r.a.createElement(De.a,{theme:Me},r.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,a,t){},77:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){}},[[109,1,2]]]);
//# sourceMappingURL=main.85a3ee55.chunk.js.map