{"version":3,"sources":["serviceWorker.js","components/Char.js","constants.js","actions.js","inputChecker.js","jap-char.js","components/CharList.js","components/CharInput.js","components/NavBar.js","components/Music.js","components/Hint.js","components/Signin.js","components/Register.js","components/WordCard.js","components/OutsideAlerter.js","containers/App.js","reducers.js","index.js"],"names":["Boolean","window","location","hostname","match","Char","className","this","props","cardState","char","React","Component","REGISTER_URL","SIGNIN_URL","MEDIA_BASE_URL_WORD","completeChar","timestamp","completionType","type","time","katakanaToRomaji","ア","イ","ウ","エ","オ","ン","カ","キ","ク","ケ","コ","サ","シ","ス","セ","ソ","タ","チ","ツ","テ","ト","ナ","ニ","ヌ","ネ","ノ","ハ","ヒ","フ","ヘ","ホ","マ","ミ","ム","メ","モ","ヤ","ユ","ヨ","ラ","リ","ル","レ","ロ","ワ","ヲ","TrieNode","key","parent","children","end","Trie","root","prototype","getWord","output","node","unshift","join","insert","word","i","length","contains","find","prefix","findAllWords","arr","child","SpellCheckerBuffer","charAndRomaji","checkFunction","dict","buffer","charTrie","Object","values","forEach","element","pendingChars","Array","isArray","sp","includes","console","log","checkInput","katakanaHint","romaji","imageLink","shortHint","CharList","componentDidMount","timeStamp","Date","now","setNewWordTime","partitionCharIndex","charList","characterCounter","map","item","decideCardState","userInput","cardJapChar","cardRomaji","idx","indexPartition","hintDisplayOn","updateCurrentChar","hintedCharList","onWrongInput","onIncorrectCard","onWordCompletion","userChar","indexOfCurrentCard","romajiLength","slice","concat","charTimestamp","onCompleteChar","state","dispatchTime","charsToRead","charsArrayDisplay","Grid","container","direction","justify","alignItems","spacing","connect","changeCardState","dispatch","CharInput","formRef","createRef","Input","placeholder","inputProps","onChange","onInputChange","onKeyDown","onSpecialKeyPress","autoFocus","inputRef","onPaste","event","preventDefault","useStyles","makeStyles","theme","flexGrow","title","NavBar","onRouteChange","classes","AppBar","position","Toolbar","Typography","variant","color","align","Button","onClick","Music","play","audio","Audio","audioLink","togglePlay","setState","onAudioPlay","pause","onAudioPause","delay","addEventListener","setTimeout","removeEventListener","audioIsPlaying","changeGeneralState","maxWidth","media","height","Hint","currentHintedChar","sentenceFragments","replace","split","Card","CardActionArea","CardMedia","component","alt","image","CardContent","Signin","onEmailInput","signInEmail","target","value","emailErrorMsg","onPasswordInput","signInPassword","passwordErrorMsg","sendSigninInfoToBackend","fetch","method","headers","body","JSON","stringify","email","password","then","response","json","data","keys","loadUser","catch","error","onSignIn","Paper","paper2","elevation","Container","CssBaseline","paper","form","noValidate","TextField","helperText","margin","required","fullWidth","id","label","name","autoComplete","FormControlLabel","control","Checkbox","submit","xs","Link","href","withStyles","fontFamily","backfround","marginTop","display","flexDirection","marginBottom","padding","breakpoints","up","width","marginLeft","marginRight","Register","onNameInput","nameErrorMsg","sendFormDataToBackEnd","onFormSubmit","validateEmail","nameError","emailError","passwordError","test","String","toLowerCase","minWidth","bullet","transform","fontSize","pos","OutlinedCard","wordInfo","useState","document","createElement","innerHTML","sentenceSegments","sentence_expression","parseAudio","audio_string","useEffect","gutterBottom","vocab_meaning","vocab_pos","vocab_sound_local","sentence_sound_local","sentence_meaning","OutsideAlerter","handleClickOutside","componentWillUnmount","setWrapperRef","wrapperRef","focusInputBox","ref","App","route","parseJapaneseWord","c","c_romaji","push","convertTimeToScoreDelta","score_delta","updateCharScore","user_uid","scoreDeltaList","charScoreDeltaList","res","updateWordScore","unix_time","currentWord_unix_time","requestNewWord","userInfo","updateWord","vocab_kana","currentWordInfo","err","currentRomaji","curWrongChar","onHintedCard","onSpacePress","onEnterPress","onInputBoxChange","wordCompleted","currentWord","which","user","joined","prevState","keypressGlobalHandler","charInputRef","current","focus","showHint","currentJapChar","displayWordInfo","displayMessage","wrongCharList","userWrongInput","renderRoute","setCurrentChar","changeInputBox","inputBox","payload","japchar","updateChar","pressEnter","currentChar","typeWrongAnswer","context","pressSpace","initialInputBox","initialGeneralState","initialCardState","prevTimestamp","allCharTimestamp","rootReducer","combineReducers","action","newTimestamp","logger","createLogger","store","createStore","applyMiddleware","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.494ce676.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport \"../containers/App.css\";\nimport \"./Char.css\";\n\nclass Char extends React.Component {\n  render() {\n    const className = `tmw5 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10 ${this.props.cardState}`;\n    return (\n      <div className={className}>\n        <h1 className=\"char\">{this.props.char}</h1>\n      </div>\n    );\n  }\n}\n\nexport default Char;\n","export const USER_INPUT = \"USER_INPUT\";\r\n\r\nconst method = \"tuanHeroku\";\r\n\r\nvar REGISTER_URL = \"https://localhost:3000/register\";\r\nvar SIGNIN_URL = \"https://localhost:3000/signin\";\r\nvar PROFILE_URL = \"https://localhost:3000/profile/\";\r\nvar GETWORD_URL = \"https://shrouded-harbor-11572.herokuapp.com/getnextword\";\r\nvar CHARSCORE_URL = \"https://shrouded-harbor-11572.herokuapp.com/charscore\";\r\nvar WORDSCORE_URL = \"https://shrouded-harbor-11572.herokuapp.com/wordscore\";\r\nvar MEDIA_BASE_URL_SENTENCE =\r\n  \"https://s3.amazonaws.com/media.japanesereading.com/sentence-sound/\";\r\nvar MEDIA_BASE_URL_WORD =\r\n  \"https://s3.amazonaws.com/media.japanesereading.com/word-sound/\";\r\n// source: https://www.learn-japanese-adventure.com/learn-how-to-speak-japanese.html\r\nvar MEDIA_BASE_URL_CHAR =\r\n  \"https://s3.amazonaws.com/media.japanesereading.com/character-sound/kanasound-\"; // add {romaji}.mp3\r\nvar WORD_LINK =\r\n  \"https://www.reddit.com/r/LearnJapanese/comments/s2iop/heres_a_spreadsheet_of_the_6000_most_common/c4ak0xd/\";\r\nvar TOFUGU_LINK = \"https://www.tofugu.com/japanese/learn-katakana/\";\r\n\r\nswitch (method) {\r\n  case \"local\":\r\n    break;\r\n  case \"tuanHeroku\":\r\n    REGISTER_URL = \"https://shrouded-harbor-11572.herokuapp.com/register\";\r\n    SIGNIN_URL = \"https://shrouded-harbor-11572.herokuapp.com/signin\";\r\n    PROFILE_URL = \"https://shrouded-harbor-11572.herokuapp.com/profile/\";\r\n    break;\r\n  case \"lienHeroku\":\r\n    REGISTER_URL = \"https://peaceful-sands-25473.herokuapp.com/register\";\r\n    SIGNIN_URL = \"https://peaceful-sands-25473.herokuapp.com/signin\";\r\n    PROFILE_URL = \"https://peaceful-sands-25473.herokuapp.com/profile/\";\r\n    break;\r\n  default:\r\n    console.log(\"method should be either tuanHeroku, lienHeroku, or local\");\r\n    break;\r\n}\r\n\r\nexport {\r\n  REGISTER_URL,\r\n  SIGNIN_URL,\r\n  PROFILE_URL,\r\n  GETWORD_URL,\r\n  MEDIA_BASE_URL_SENTENCE,\r\n  MEDIA_BASE_URL_WORD,\r\n  MEDIA_BASE_URL_CHAR,\r\n  CHARSCORE_URL,\r\n  WORDSCORE_URL,\r\n  WORD_LINK,\r\n  TOFUGU_LINK,\r\n};\r\n","import { USER_INPUT } from \"./constants.js\";\r\n\r\nexport const typeAnswer = (text) => {\r\n  return {\r\n    type: USER_INPUT,\r\n    payload: text,\r\n  };\r\n};\r\n\r\nexport const pressSpace = (context) => {\r\n  switch (context) {\r\n    case \"REQUEST_HINT\":\r\n      return {\r\n        type: \"SPACE_PRESS_FOR_HINT\",\r\n        time: Date.now(),\r\n      };\r\n    case \"CONTINUE_AFTER_ERROR\":\r\n      return {\r\n        type: \"SPACE_PRESS_TO_CONTINUE\",\r\n        time: Date.now(),\r\n      };\r\n    case \"CONTINUE_AFTER_COMPLETE\":\r\n      return {\r\n        type: \"SPACE_PRESS_TO_GO_NEXT\",\r\n        time: Date.now(),\r\n      };\r\n    default:\r\n      return {\r\n        type: \"SPACE_PRESS\",\r\n      };\r\n  }\r\n};\r\n\r\nexport const updateChar = (japchar, romaji) => {\r\n  return {\r\n    type: \"CHAR_UPDATE\",\r\n    currentJapChar: japchar,\r\n    currentRomaji: romaji,\r\n  };\r\n};\r\n\r\nexport const pressEnter = (time) => {\r\n  return {\r\n    type: \"ENTER_PRESS\",\r\n    time: time,\r\n  };\r\n};\r\n\r\nexport const typeWrongAnswer = (userChar, currentChar) => {\r\n  return {\r\n    type: \"WRONG_INPUT\",\r\n    userInput: userChar,\r\n    currentChar: currentChar,\r\n    time: Date.now(),\r\n  };\r\n};\r\n\r\nexport const completeWord = () => {\r\n  return {\r\n    type: \"COMPLETE_WORD\",\r\n    time: Date.now(), // when user complete last character Card\r\n  };\r\n};\r\n\r\nexport const updateWord = (word) => {\r\n  return {\r\n    type: \"UPDATE_WORD\",\r\n    payload: word,\r\n  };\r\n};\r\n\r\nexport const completeChar = (timestamp, completionType) => {\r\n  return {\r\n    type: \"COMPLETE_CHAR\",\r\n    time: timestamp,\r\n    completionType: completionType,\r\n  };\r\n};\r\n\r\nexport const setNewWordTime = (time) => {\r\n  return {\r\n    type: \"SET_NEW_WORD_TIME\",\r\n    time: time,\r\n  };\r\n};\r\n\r\nexport const onAudioPlay = () => {\r\n  return {\r\n    type: \"PLAY_AUDIO\",\r\n  };\r\n};\r\n\r\nexport const onAudioPause = () => {\r\n  return {\r\n    type: \"PAUSE_AUDIO\",\r\n  };\r\n};\r\n","// Trie.js - super simple JS implementation\r\n// https://en.wikipedia.org/wiki/Trie\r\n// https://gist.github.com/tpae/72e1c54471e88b689f85ad2b3940a8f0\r\n\r\n// -----------------------------------------\r\n\r\nconst katakanaToRomaji = {\r\n  ア: \"a\",\r\n  イ: \"i\",\r\n  ウ: \"u\",\r\n  エ: \"e\",\r\n  オ: \"o\",\r\n  ン: \"n\",\r\n  カ: \"ka\",\r\n  キ: \"ki\",\r\n  ク: \"ku\",\r\n  ケ: \"ke\",\r\n  コ: \"ko\",\r\n  サ: \"sa\",\r\n  シ: \"shi\",\r\n  ス: \"su\",\r\n  セ: \"se\",\r\n  ソ: \"so\",\r\n  タ: \"ta\",\r\n  チ: \"chi\",\r\n  ツ: \"tsu\",\r\n  テ: \"te\",\r\n  ト: \"to\",\r\n  ナ: \"na\",\r\n  ニ: \"ni\",\r\n  ヌ: \"nu\",\r\n  ネ: \"ne\",\r\n  ノ: \"no\",\r\n  ハ: \"ha\",\r\n  ヒ: \"hi\",\r\n  フ: \"fu\",\r\n  ヘ: \"he\",\r\n  ホ: \"ho\",\r\n  マ: \"ma\",\r\n  ミ: \"mi\",\r\n  ム: \"mu\",\r\n  メ: \"me\",\r\n  モ: \"mo\",\r\n  ヤ: \"ya\",\r\n  ユ: \"yu\",\r\n  ヨ: \"yo\",\r\n  ラ: \"ra\",\r\n  リ: \"ri\",\r\n  ル: \"ru\",\r\n  レ: \"re\",\r\n  ロ: \"ro\",\r\n  ワ: \"wa\",\r\n  ヲ: \"wo\",\r\n};\r\n\r\n// we start with the TrieNode\r\nfunction TrieNode(key) {\r\n  // the \"key\" value will be the character in sequence\r\n  this.key = key;\r\n\r\n  // we keep a reference to parent\r\n  this.parent = null;\r\n\r\n  // we have hash of children\r\n  this.children = {};\r\n\r\n  // check to see if the node is at the end\r\n  this.end = false;\r\n}\r\n\r\n// iterates through the parents to get the word.\r\n// time complexity: O(k), k = word length\r\nTrieNode.prototype.getWord = function () {\r\n  var output = [];\r\n  var node = this;\r\n\r\n  while (node !== null) {\r\n    output.unshift(node.key);\r\n    node = node.parent;\r\n  }\r\n\r\n  return output.join(\"\");\r\n};\r\n\r\n// -----------------------------------------\r\n\r\n// we implement Trie with just a simple root with null value.\r\nfunction Trie() {\r\n  this.root = new TrieNode(null);\r\n}\r\n\r\n// inserts a word into the trie.\r\n// time complexity: O(k), k = word length\r\nTrie.prototype.insert = function (word) {\r\n  var node = this.root; // we start at the root\r\n\r\n  // for every character in the word\r\n  for (var i = 0; i < word.length; i++) {\r\n    // check to see if character node exists in children.\r\n    if (!node.children[word[i]]) {\r\n      // if it doesn't exist, we then create it.\r\n      node.children[word[i]] = new TrieNode(word[i]);\r\n\r\n      // we also assign the parent to the child node.\r\n      node.children[word[i]].parent = node;\r\n    }\r\n\r\n    // proceed to the next depth in the trie.\r\n    node = node.children[word[i]];\r\n\r\n    // finally, we check to see if it's the last word.\r\n    if (i == word.length - 1) {\r\n      // if it is, we set the end flag to true.\r\n      node.end = true;\r\n    }\r\n  }\r\n};\r\n\r\n// check if it contains a whole word.\r\n// time complexity: O(k), k = word length\r\nTrie.prototype.contains = function (word) {\r\n  var node = this.root;\r\n\r\n  // for every character in the word\r\n  for (var i = 0; i < word.length; i++) {\r\n    // check to see if character node exists in children.\r\n    if (node.children[word[i]]) {\r\n      // if it exists, proceed to the next depth of the trie.\r\n      node = node.children[word[i]];\r\n    } else {\r\n      // doesn't exist, return false since it's not a valid word.\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // we finished going through all the words, but is it a whole word?\r\n  return node.end;\r\n};\r\n\r\n// returns every word with given prefix\r\n// time complexity: O(p + n), p = prefix length, n = number of child paths\r\nTrie.prototype.find = function (prefix) {\r\n  var node = this.root;\r\n  var output = [];\r\n\r\n  // for every character in the prefix\r\n  for (var i = 0; i < prefix.length; i++) {\r\n    // make sure prefix actually has words\r\n    if (node.children[prefix[i]]) {\r\n      node = node.children[prefix[i]];\r\n    } else {\r\n      // there's none. just return it.\r\n      return output;\r\n    }\r\n  }\r\n\r\n  // recursively find all words in the node\r\n  findAllWords(node, output);\r\n\r\n  return output;\r\n};\r\n\r\n// recursive function to find all words in the given node.\r\nfunction findAllWords(node, arr) {\r\n  // base case, if node is at a word, push to output\r\n  if (node.end) {\r\n    arr.unshift(node.getWord());\r\n  }\r\n\r\n  // iterate through each children, call recursive findAllWords\r\n  for (var child in node.children) {\r\n    findAllWords(node.children[child], arr);\r\n  }\r\n}\r\n\r\n// -----------------------------------------\r\n\r\n// instantiate our trie\r\n//   var trie = new Trie();\r\n\r\n//   // insert few values\r\n//   trie.insert(\"hello\");\r\n//   trie.insert(\"helium\");\r\n\r\n// check contains method\r\n//console.log(trie.contains(\"helium\"));  // true\r\n//console.log(trie.contains(\"kickass\")); // false\r\n\r\n// check find method\r\n//console.log(trie.find(\"hel\"));  // [ 'helium', 'hello' ]\r\n//console.log(trie.find(\"hell\")); // [ 'hello' ]\r\n\r\nclass SpellCheckerBuffer {\r\n  constructor(charAndRomaji, checkFunction) {\r\n    this.dict = charAndRomaji;\r\n    this.checkFunction = checkFunction;\r\n    this.buffer = \"\";\r\n    this.charTrie = new Trie();\r\n    Object.values(this.dict).forEach((element) => {\r\n      this.charTrie.insert(element);\r\n    });\r\n    //console.log(this.charTrie.find(\"\"));\r\n  }\r\n  checkInput(char) {\r\n    this.buffer += char;\r\n    if (this.charTrie.contains(this.buffer)) {\r\n      this.checkFunction(this.buffer);\r\n      this.buffer = \"\";\r\n    } else {\r\n      var pendingChars = this.charTrie.find(this.buffer);\r\n      if (!Array.isArray(pendingChars) || !pendingChars.length) {\r\n        this.checkFunction(this.buffer);\r\n        this.buffer = \"\";\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction isCorrect(char) {\r\n  if (Object.values(katakanaToRomaji).includes(char)) {\r\n    console.log(`${char} true`);\r\n  } else {\r\n    console.log(`${char} false`);\r\n  }\r\n}\r\n\r\nconst sp = new SpellCheckerBuffer(katakanaToRomaji, isCorrect);\r\nsp.checkInput(\"a\");\r\nsp.checkInput(\"m\");\r\nsp.checkInput(\"b\");\r\nsp.checkInput(\"m\");\r\nsp.checkInput(\"a\");\r\nsp.checkInput(\"t\");\r\nsp.checkInput(\"s\");\r\nsp.checkInput(\"u\");\r\nsp.checkInput(\"u\");\r\n\r\nexport default SpellCheckerBuffer;\r\n","const katakanaToRomaji = {\r\n  ア: \"a\",\r\n  イ: \"i\",\r\n  ウ: \"u\",\r\n  エ: \"e\",\r\n  オ: \"o\",\r\n  カ: \"ka\",\r\n  キ: \"ki\",\r\n  ク: \"ku\",\r\n  ケ: \"ke\",\r\n  コ: \"ko\",\r\n  サ: \"sa\",\r\n  シ: \"shi\",\r\n  ス: \"su\",\r\n  セ: \"se\",\r\n  ソ: \"so\",\r\n  タ: \"ta\",\r\n  チ: \"chi\",\r\n  ツ: \"tsu\",\r\n  テ: \"te\",\r\n  ト: \"to\",\r\n  ナ: \"na\",\r\n  ニ: \"ni\",\r\n  ヌ: \"nu\",\r\n  ネ: \"ne\",\r\n  ノ: \"no\",\r\n  ハ: \"ha\",\r\n  ヒ: \"hi\",\r\n  フ: \"fu\",\r\n  ヘ: \"he\",\r\n  ホ: \"ho\",\r\n  マ: \"ma\",\r\n  ミ: \"mi\",\r\n  ム: \"mu\",\r\n  メ: \"me\",\r\n  モ: \"mo\",\r\n  ヤ: \"ya\",\r\n  ユ: \"yu\",\r\n  ヨ: \"yo\",\r\n  ラ: \"ra\",\r\n  リ: \"ri\",\r\n  ル: \"ru\",\r\n  レ: \"re\",\r\n  ロ: \"ro\",\r\n  ワ: \"wa\",\r\n  ヲ: \"wo\",\r\n  ン: \"n\",\r\n};\r\n\r\nconst katakanaHint = {\r\n  ア: {\r\n    romaji: \"a\",\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A2.jpg\",\r\n    shortHint: \"Find the capital 'A'\",\r\n  },\r\n  イ: {\r\n    romaji: \"i\",\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A4.jpg\",\r\n    shortHint: \"It looks like an <u>ea</u>gle (i)\",\r\n  },\r\n  ウ: {\r\n    romaji: \"u\",\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AB.jpg\",\r\n    shortHint: \"ウ looks like う (u)\",\r\n  },\r\n  エ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A8.jpg\",\r\n    shortHint:\r\n      \"Imagine this is the girders an <u>e</u> engineer would use to build buildings\",\r\n  },\r\n  オ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AA.jpg\",\r\n    shortHint:\r\n      'A dude flapping open his trench coat to flash you. \"<u>Oh</u> MY GOD!\" you say. ',\r\n  },\r\n  カ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AB.jpg\",\r\n    shortHint: \"It looks just like the Hiragana か\",\r\n  },\r\n  キ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AD.jpg\",\r\n    shortHint: \"A key (ki)\",\r\n  },\r\n  ク: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AF.jpg\",\r\n    shortHint: \"A long <u>coo</u>ks's (ku) hat\",\r\n  },\r\n  ケ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B1.jpg\",\r\n    shortHint: \"It looks like the letter <u>K</u> (ke)\",\r\n  },\r\n  コ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B3.jpg\",\r\n    shortHint: \"Two 90 degrees <u>co</u>rners (ko)\",\r\n  },\r\n  サ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B5.jpg\",\r\n    shortHint: \"Three <u>sa</u>rdines stacked on top of each other\",\r\n  },\r\n  シ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B7.jpg\",\r\n    shortHint: \"<u>She</u> has a very werid face (shi)\",\r\n  },\r\n  ス: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B9.jpg\",\r\n    shortHint: \"A hanger where you hang up your fancy <u>su</u>it (su)\",\r\n  },\r\n  セ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BB.jpg\",\r\n    shortHint: \"It looks like the Hiragana せ\",\r\n  },\r\n  ソ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BD.jpg\",\r\n    shortHint: \"One needle and a long thread which you use to <u>sew</u> (so)\",\r\n  },\r\n  タ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BF.jpg\",\r\n    shortHint: \"A <u>ti</u>dal wave racing across the sea (ta)\",\r\n  },\r\n  チ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%81.jpg\",\r\n    shortHint: \"A <u>chee</u>rleader doing a <u>chee</u>r (chi)\",\r\n  },\r\n  ツ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%84.jpg\",\r\n    shortHint: \"<u>Two</u> (tsu) needles\",\r\n  },\r\n  テ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%86.jpg\",\r\n    shortHint: \"A <u>te</u>lephone pole\",\r\n  },\r\n  ト: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%88.jpg\",\r\n    shortHint: \"A <u>to</u>tem pole\",\r\n  },\r\n  ナ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8A.jpg\",\r\n    shortHint: \"A majestic <u>na</u>rwhal\",\r\n  },\r\n  ニ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8B.jpg\",\r\n    shortHint: \"Two <u>nee</u>dles (ni) laying on their side\",\r\n  },\r\n  ヌ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8C.jpg\",\r\n    shortHint:\r\n      \"The chopsticks are grabbing onto some <u>noo</u>dles & pulling them out of a bowl. (nu)\",\r\n  },\r\n  ネ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8D.jpg\",\r\n    shortHint: \"A <u>ne</u>cromancer has summoned this zombie\",\r\n  },\r\n  ノ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8E.jpg\",\r\n    shortHint: \"A really long <u>no</u>se\",\r\n  },\r\n  ハ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8F.jpg\",\r\n    shortHint: \"A rice paddy <u>ha</u>t\",\r\n  },\r\n  ヒ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%92.jpg\",\r\n    shortHint: \"<u>He</u> (hi) has no head. <u>He</u> is reaching out to you.\",\r\n  },\r\n  フ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%95.jpg\",\r\n    shortHint: \"A <u>fu</u>nny looking owl\",\r\n  },\r\n  ヘ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%98.jpg\",\r\n    shortHint: \"This looks like the Hiragana へ\",\r\n  },\r\n  ホ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9B.jpg\",\r\n    shortHint: \"A <u>ho</u>ly cross\",\r\n  },\r\n  マ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9E.jpg\",\r\n    shortHint: \"Look at all those angles! Those lengths! All that <u>ma</u>th!\",\r\n  },\r\n  ミ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9F.jpg\",\r\n    shortHint: \"Three <u>mi</u>ssiles, flying towards you. Be careful!\",\r\n  },\r\n  ム: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A0.jpg\",\r\n    shortHint: \"It is shaped like a pile of poop. Cow poop. <u>Moo</u>. (mu)\",\r\n  },\r\n  メ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A1.jpg\",\r\n    shortHint: 'め <u>Me</u> is Japnese for \"eye\"',\r\n  },\r\n  モ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A2.jpg\",\r\n    shortHint: \"This looks like the Hiragana も\",\r\n  },\r\n  ヤ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A4.jpg\",\r\n    shortHint: \"This looks just like the Hiragana や\",\r\n  },\r\n  ユ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A6.jpg\",\r\n    shortHint: \"You (yu) have a hook for a hand\",\r\n  },\r\n  ヨ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A8.jpg\",\r\n    shortHint: \"A <u>yo</u>gurt containers\",\r\n  },\r\n  ラ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A9.jpg\",\r\n    shortHint: \"It is a <u>ra</u>ptor wearing sweet <u>ra</u>y-bans\",\r\n  },\r\n  リ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AA.jpg\",\r\n    shortHint: \"It looks like the Hiragana り\",\r\n  },\r\n  ル: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AB.jpg\",\r\n    shortHint:\r\n      \"There are two <u>rou</u>tes (ru) you can take. Route 1 & Route 2.\",\r\n  },\r\n  レ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AC.jpg\",\r\n    shortHint: \"Look at that beautiful <u>re</u>d hair that <u>Re</u>i has!\",\r\n  },\r\n  ロ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AD.jpg\",\r\n    shortHint:\r\n      \"This <u>ro</u>ad goes around in a square, never ending. What a terrible <u>ro</u>ad this is.\",\r\n  },\r\n  ワ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AF.jpg\",\r\n    shortHint:\r\n      \"You often begin your question with the word <u>wha</u>t (wa). <u>Wha</u>t are you doing?\",\r\n  },\r\n  ヲ: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B2.jpg\",\r\n    shortHint: \"A dog <u>wo</u>ofing (wo) so hard its tongue is flying out\",\r\n  },\r\n  ン: {\r\n    imageLink:\r\n      \"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B3.jpg\",\r\n    shortHint: \"This guy only has one eye. <u>N</u>oooo!\",\r\n  },\r\n};\r\n\r\nexport { katakanaToRomaji, katakanaHint };\r\n","import React from \"react\";\nimport Char from \"./Char.js\";\nimport { Grid } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { completeChar, setNewWordTime } from \"../actions\";\nimport SpellCheckerBuffer from \"../inputChecker\";\nimport { katakanaToRomaji } from \"../jap-char\";\n\nfunction isCorrect(char) {\n  if (Object.values(katakanaToRomaji).includes(char)) {\n    console.log(`${char} true`);\n  } else {\n    console.log(`${char} false`);\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    charTimestamp: state.changeCardState.charTimestamp,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onCompleteChar: (time, type) => {\n      dispatch(completeChar(time, type));\n    },\n    setNewWordTime: (time) => {\n      dispatch(setNewWordTime(time));\n    },\n  };\n};\n\nclass CharList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dispatchTime: 0,\n    };\n  }\n\n  componentDidMount = () => {\n    const timeStamp = Date.now();\n    this.props.setNewWordTime(timeStamp);\n\n    const sp = new SpellCheckerBuffer(katakanaToRomaji, console.log);\n    console.log(\"TESTING\");\n    sp.checkInput(\"a\");\n    sp.checkInput(\"m\");\n    sp.checkInput(\"b\");\n    sp.checkInput(\"m\");\n    sp.checkInput(\"a\");\n    sp.checkInput(\"t\");\n    sp.checkInput(\"s\");\n    sp.checkInput(\"u\");\n    sp.checkInput(\"u\");\n  };\n\n  partitionCharIndex = (charList) => {\n    var characterCounter = 0;\n\n    const indexPartition = charList.map(\n      (item) => (characterCounter += item.length)\n    );\n\n    return indexPartition;\n  };\n\n  decideCardState = (\n    userInput,\n    cardJapChar,\n    cardRomaji,\n    idx,\n    indexPartition,\n    hintDisplayOn,\n    updateCurrentChar,\n    hintedCharList,\n    onWrongInput,\n    onIncorrectCard,\n    onWordCompletion\n  ) => {\n    var userChar = \"\";\n    var className = \"\";\n    var indexOfCurrentCard = null;\n    var romajiLength = indexPartition[indexPartition.length - 1];\n\n    if (userInput.length >= indexPartition[idx]) {\n      // infer userChar using partitioning indices\n      if (idx === 0) {\n        userChar = userInput.slice(0, indexPartition[idx]);\n      } else {\n        userChar = userInput.slice(\n          indexPartition[idx - 1],\n          indexPartition[idx]\n        );\n      }\n      if (userChar === cardRomaji) {\n        if (hintedCharList.includes(cardRomaji)) {\n          className = className.concat(\" hinted \");\n\n          /* this simple condition is crucial due to prevent repeated 'onCorrectChar' call due to repeated \n          rendering everytime the user types something and \n          update the redux store */\n          if (idx >= this.props.charTimestamp.length) {\n            this.props.onCompleteChar(Date.now(), \"hinted\");\n          }\n        } else {\n          className = className.concat(\" correct \");\n\n          if (idx >= this.props.charTimestamp.length) {\n            this.props.onCompleteChar(Date.now(), \"correct\");\n          }\n        }\n        if (\n          userInput.length >= romajiLength &&\n          idx === indexPartition.length - 1\n        ) {\n          // if the last card is correct\n          onWordCompletion();\n        }\n      } else {\n        className = className.concat(\" incorrect \");\n        onWrongInput(userChar, cardRomaji);\n      }\n    }\n    // decide which Card to highlight\n    for (var i = 0; i < indexPartition.length; i++) {\n      if (userInput.length < indexPartition[i]) {\n        if (!onIncorrectCard) {\n          indexOfCurrentCard = i;\n        } else {\n          indexOfCurrentCard = i - 1;\n        }\n        if (idx === indexOfCurrentCard) {\n          className = className.concat(\" highlighted \");\n          console.log(`UPDATING CHAR ${idx} ${cardJapChar} ${cardRomaji}`);\n          updateCurrentChar(cardJapChar, cardRomaji);\n        }\n        break;\n      }\n    }\n    // fade all cards except the highlighted one\n    if (hintDisplayOn) {\n      if (idx !== indexOfCurrentCard) {\n        className = className.concat(\" o-30 \");\n      }\n    }\n\n    return className;\n  };\n\n  render() {\n    const charList = this.props.charsToRead.map((item) => item.romaji);\n    const indexPartition = this.partitionCharIndex(charList);\n\n    const charsArrayDisplay = this.props.charsToRead.map((item, i) => {\n      return (\n        <Grid item key={i}>\n          <Char\n            char={item.char}\n            key={i}\n            cardState={this.decideCardState(\n              this.props.userInput,\n              item.char,\n              item.romaji,\n              i,\n              indexPartition,\n              this.props.hintDisplayOn,\n              this.props.updateCurrentChar,\n              this.props.hintedCharList,\n              this.props.onWrongInput,\n              this.props.onIncorrectCard,\n              this.props.onWordCompletion\n            )}\n          />\n        </Grid>\n      );\n    });\n\n    return (\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"center\"\n        spacing=\"1\"\n      >\n        {charsArrayDisplay}\n      </Grid>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CharList);\n","import React from \"react\";\nimport \"../containers/App.css\";\nimport { Input } from \"@material-ui/core\";\n\nclass CharInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.formRef = React.createRef();\n  }\n\n  render() {\n    return (\n      <form>\n        <Input\n          placeholder=\"Start typing here...\"\n          inputProps={{ \"aria-label\": \"description\" }}\n          onChange={this.props.onInputChange}\n          onKeyDown={this.props.onSpecialKeyPress}\n          autoFocus\n          inputRef={this.formRef}\n          onPaste={(event) => {\n            event.preventDefault();\n          }}\n        />\n      </form>\n    );\n  }\n}\n\nexport default CharInput;\n","import React from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Button } from \"@material-ui/core\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nconst NavBar = ({ onRouteChange }) => {\n  const classes = useStyles();\n\n  return (\n    <div className = {classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title} align=\"left\">\n            Japanese vs. English words\n          </Typography>\n          <Button\n            color=\"inherit\"\n            onClick={() => onRouteChange(\"signin\")}\n          >\n            Signout\n          </Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\nexport default NavBar;\n","// Taken from this https://stackoverflow.com/questions/47686345/playing-sound-in-reactjs\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { onAudioPlay, onAudioPause } from \"../actions\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    audioIsPlaying: state.changeGeneralState.audioIsPlaying,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onAudioPlay: () => {\r\n      dispatch(onAudioPlay());\r\n    },\r\n    onAudioPause: () => {\r\n      dispatch(onAudioPause());\r\n    },\r\n  };\r\n};\r\n\r\nclass Music extends React.Component {\r\n  state = {\r\n    play: false,\r\n    audio: new Audio(`${this.props.audioLink}`),\r\n  };\r\n\r\n  componentDidMount() {\r\n    // this.state.audio.addEventListener(\"loadedmetadata\", (e) => {\r\n    //   console.log(\"DURATION\", e.target.duration);\r\n    // });\r\n    console.log(\"props duration\", this.props.delay);\r\n    this.state.audio.addEventListener(\"ended\", () => {\r\n      this.setState({ play: false });\r\n      console.log(\"end audio\");\r\n      this.props.onAudioPause();\r\n    });\r\n    setTimeout(() => {\r\n      this.state.audio.play();\r\n      this.props.onAudioPlay();\r\n    }, this.props.delay);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.state.audio.removeEventListener(\"ended\", () =>\r\n      this.setState({ play: false })\r\n    );\r\n  }\r\n\r\n  togglePlay = () => {\r\n    this.setState({ play: !this.state.play }, () => {\r\n      if (this.state.play) {\r\n        this.state.audio.play();\r\n        console.log(\"distpach\");\r\n        this.props.onAudioPlay();\r\n      } else {\r\n        this.state.audio.pause();\r\n        this.props.onAudioPause();\r\n      }\r\n      // this.state.play ? this.state.audio.play() : this.state.audio.pause();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={this.togglePlay}>\r\n          {this.state.play ? \"Pause Audio\" : \"Play Audio\"}\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Music);\r\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Music from \"./Music\";\nimport { katakanaToRomaji, katakanaHint } from \"../jap-char\";\nimport { MEDIA_BASE_URL_CHAR } from \"../constants\";\n\n//original component\n// const Hint = () =>{\n//     return(\n//         <div className = \"mw5 center bg-white br3 pa3 ba b--black-10\">\n//             <img alt ='character mnemonic' width=\"200\" height=\"200\" src=''/>\n//             <div>\n//                 <hr className=\"mw3 bb bw1 b--black-10\"></hr>\n//                 <p>This will be a brief explanation</p>\n//             </div>\n//         </div>\n//     );\n// }\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 320,\n  },\n  media: {\n    height: 200,\n  },\n});\n\nconst parseoutUnderlineText = (sentence) => {\n  // replace <b> and </b> with comma\n  sentence = sentence.replace(/<\\/?u>/g, \",\");\n  return sentence.split(\",\");\n};\n\nexport default function Hint({ currentHintedChar }) {\n  const classes = useStyles();\n  const romaji = katakanaToRomaji[currentHintedChar];\n  const sentenceFragments = parseoutUnderlineText(\n    katakanaHint[currentHintedChar].shortHint\n  );\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea>\n        <CardMedia\n          className={classes.media}\n          component=\"img\"\n          alt=\"Hint for character\"\n          image={katakanaHint[currentHintedChar].imageLink}\n          title=\"Hint for character\"\n        />\n        <CardContent>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {sentenceFragments[0]}\n            <u>{sentenceFragments[1]}</u>\n            {sentenceFragments[2]}\n          </Typography>\n          <br></br>\n          <Music audioLink={MEDIA_BASE_URL_CHAR + romaji + \".mp3\"} />\n        </CardContent>\n      </CardActionArea>\n      {/* <CardActions>\n        <Button size=\"small\" color=\"primary\">\n          Share\n        </Button>\n        <Button size=\"small\" color=\"primary\">\n          Learn More\n        </Button>\n      </CardActions> */}\n    </Card>\n  );\n}\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { SIGNIN_URL } from \"../constants\";\r\nimport { sizing } from \"@material-ui/system\";\r\n\r\nconst useStyles = (theme) => ({\r\n  container: {\r\n    fontFamily: \"Roboto\",\r\n    backfround: \"white\",\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  paper2: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(3),\r\n    padding: theme.spacing(1),\r\n    [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\r\n      width: 500,\r\n      height: 450,\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n});\r\n\r\nclass Signin extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      signInEmail: \"\",\r\n      signInPassword: \"\",\r\n      emailErrorMsg: \"\",\r\n      passwordErrorMsg: \"\",\r\n    };\r\n  }\r\n\r\n  onEmailInput = (event) => {\r\n    this.setState({ signInEmail: event.target.value, emailErrorMsg: \"\" });\r\n  };\r\n\r\n  onPasswordInput = (event) => {\r\n    this.setState({ signInPassword: event.target.value, passwordErrorMsg: \"\" });\r\n  };\r\n\r\n  sendSigninInfoToBackend = () => {\r\n    const { signInEmail, signInPassword } = this.state;\r\n\r\n    fetch(SIGNIN_URL, {\r\n      method: \"post\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        email: signInEmail,\r\n        password: signInPassword,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (Object.keys(data).length === 4) {\r\n          console.log(\"data\", data);\r\n          this.props.loadUser(data);\r\n          this.props.onRouteChange(\"home\");\r\n          this.setState({\r\n            emailErrorMsg: \"\",\r\n            passwordErrorMsg: \"\",\r\n          });\r\n        } else {\r\n          // there is an error loggin in\r\n          console.log(\"Login Failed\", data);\r\n          if (data === \"email is not yet registered\") {\r\n            this.setState({ emailErrorMsg: data });\r\n          } else if (data === \"incorrect password\") {\r\n            this.setState({\r\n              passwordErrorMsg: data,\r\n              emailErrorMsg: \"\",\r\n            });\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error!\", error);\r\n      });\r\n  };\r\n\r\n  onSignIn = (event) => {\r\n    event.preventDefault();\r\n    const { signInEmail, signInPassword } = this.state;\r\n\r\n    // check that fields are not empty\r\n    if (!signInEmail) {\r\n      this.setState({ emailErrorMsg: \"please fill out your email\" });\r\n    } else {\r\n      this.setState({ emailErrorMsg: \"\" });\r\n    }\r\n    if (!signInPassword) {\r\n      this.setState({ passwordErrorMsg: \"please fill out your password\" });\r\n    } else {\r\n      this.setState({ passwordErrorMsg: \"\" });\r\n    }\r\n\r\n    if (signInEmail && signInPassword) {\r\n      this.sendSigninInfoToBackend();\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <Paper className={classes.paper2} elevation={3}>\r\n        <Container component=\"main\" maxWidth=\"xs\" className={classes.container}>\r\n          <CssBaseline />\r\n          <div className={classes.paper}>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Sign in\r\n            </Typography>\r\n            <form className={classes.form} noValidate>\r\n              <TextField\r\n                error={this.state.emailErrorMsg}\r\n                helperText={this.state.emailErrorMsg}\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                autoFocus\r\n                onChange={this.onEmailInput}\r\n              />\r\n              <TextField\r\n                error={this.state.passwordErrorMsg}\r\n                helperText={this.state.passwordErrorMsg}\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n                onChange={this.onPasswordInput}\r\n              />\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n                label=\"Remember me\"\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                onClick={this.onSignIn}\r\n              >\r\n                Sign In\r\n              </Button>\r\n              <Grid\r\n                container\r\n                alignItems=\"center\"\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n              >\r\n                <Grid item xs>\r\n                  <Link href=\"#\" variant=\"body2\">\r\n                    {\"Forgot password?\"}\r\n                  </Link>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Link\r\n                    component=\"button\"\r\n                    variant=\"body2\"\r\n                    onClick={() => this.props.onRouteChange(\"register\")}\r\n                  >\r\n                    {\"Don't have an account? Sign Up\"}\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </div>\r\n        </Container>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(Signin);\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { REGISTER_URL } from \"../constants\";\r\n\r\nconst useStyles = (theme) => ({\r\n  container: {\r\n    fontFamily: \"Roboto\",\r\n    backfround: \"white\",\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  paper2: {\r\n    marginTop: theme.spacing(3),\r\n    marginBottom: theme.spacing(3),\r\n    padding: theme.spacing(1),\r\n    [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\r\n      width: 500,\r\n      height: 450,\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n    },\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n});\r\n\r\nclass Register extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      nameError: false,\r\n      emailError: false,\r\n      passwordError: false,\r\n      nameErrorMsg: \"\",\r\n      emailErrorMsg: \"\",\r\n      passwordErrorMsg: \"\",\r\n    };\r\n  }\r\n\r\n  validateEmail(email) {\r\n    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n  }\r\n\r\n  onNameInput = (event) => {\r\n    this.setState({ name: event.target.value, nameErrorMsg: \"\" });\r\n  };\r\n\r\n  onEmailInput = (event) => {\r\n    this.setState({ email: event.target.value, emailErrorMsg: \"\" });\r\n  };\r\n\r\n  onPasswordInput = (event) => {\r\n    this.setState({ password: event.target.value, passwordErrorMsg: \"\" });\r\n  };\r\n\r\n  sendFormDataToBackEnd = () => {\r\n    const { name, email, password } = this.state;\r\n\r\n    fetch(REGISTER_URL, {\r\n      method: \"post\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        if (Object.keys(data).length === 4) {\r\n          this.setState({ emailErrorMsg: \"\" });\r\n          this.props.loadUser(data);\r\n          this.props.onRouteChange(\"home\");\r\n        } else {\r\n          // if user already exist\r\n          this.setState({ emailErrorMsg: data });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error!\", error);\r\n      });\r\n  };\r\n\r\n  onFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    const { name, email, password } = this.state;\r\n\r\n    if (!name) {\r\n      this.setState({ nameErrorMsg: \"please fill out your name\" });\r\n    } else {\r\n      this.setState({ nameErrorMsg: \"\" });\r\n    }\r\n    if (!email) {\r\n      this.setState({ emailErrorMsg: \"please fill out your email\" });\r\n    } else {\r\n      this.setState({ emailErrorMsg: \"\" });\r\n    }\r\n    if (!password) {\r\n      this.setState({ passwordErrorMsg: \"please fill out your password\" });\r\n    } else {\r\n      this.setState({ passwordErrorMsg: \"\" });\r\n    }\r\n\r\n    if (!this.validateEmail(email)) {\r\n      this.setState({ emailErrorMsg: \"please enter a valid email address\" });\r\n      return;\r\n    } else {\r\n      this.setState({ emailErrorMsg: \"\" });\r\n    }\r\n\r\n    if (name && password && email) {\r\n      this.sendFormDataToBackEnd();\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { nameErrorMsg, emailErrorMsg, passwordErrorMsg } = this.state;\r\n    return (\r\n      <Paper className={classes.paper2}>\r\n        <Container component=\"main\" maxWidth=\"xs\" className={classes.container}>\r\n          <CssBaseline />\r\n          <div className={classes.paper}>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Register\r\n            </Typography>\r\n            <form className={classes.form} noValidate>\r\n              <TextField\r\n                error={nameErrorMsg}\r\n                helperText={nameErrorMsg}\r\n                variant=\"outlined\"\r\n                id=\"name\"\r\n                label=\"Your Name\"\r\n                autoFocus\r\n                required\r\n                fullWidth\r\n                onChange={this.onNameInput}\r\n              />\r\n              <TextField\r\n                error={emailErrorMsg}\r\n                helperText={emailErrorMsg}\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n                onChange={this.onEmailInput}\r\n              />\r\n              <TextField\r\n                error={passwordErrorMsg}\r\n                helperText={passwordErrorMsg}\r\n                variant=\"outlined\"\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n                onChange={this.onPasswordInput}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                onClick={this.onFormSubmit}\r\n              >\r\n                Register\r\n              </Button>\r\n              <Grid\r\n                container\r\n                alignItems=\"center\"\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n              >\r\n                <Grid item>\r\n                  <Link\r\n                    component=\"button\"\r\n                    variant=\"body2\"\r\n                    onClick={() => this.props.onRouteChange(\"signin\")}\r\n                  >\r\n                    {\"Already registered? Sign In\"}\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </div>\r\n        </Container>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(Register);\r\n","import React, { useState, userEffect, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Music from \"./Music\";\r\nimport { MEDIA_BASE_URL_SENTENCE, MEDIA_BASE_URL_WORD } from \"../constants\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: \"inline-block\",\r\n    margin: \"0 2px\",\r\n    transform: \"scale(0.8)\",\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n});\r\n\r\nconst parseoutBoldText = (sentence) => {\r\n  // replace <b> and </b> with comma\r\n  sentence = sentence.replace(/<\\/?b>/g, \",\");\r\n  return sentence.split(\",\");\r\n};\r\n\r\nexport default function OutlinedCard({ wordInfo }) {\r\n  const classes = useStyles();\r\n  const [wordAudioDuration, setWordAudioDuration] = useState(1);\r\n\r\n  var el = document.createElement(\"html\");\r\n  el.innerHTML = \"<b>bolded text</b>\";\r\n  const sentenceSegments = parseoutBoldText(wordInfo.sentence_expression);\r\n\r\n  const parseAudio = (audio_string) => {\r\n    return audio_string.slice(7, audio_string.length - 1);\r\n  };\r\n\r\n  function getWordAudioDuration() {\r\n    const word_audio_link = `${MEDIA_BASE_URL_WORD}${parseAudio(\r\n      wordInfo.vocab_sound_local\r\n    )}`;\r\n    const word_audio = new Audio(word_audio_link);\r\n    word_audio.addEventListener(\"loadedmetadata\", (event) => {\r\n      setWordAudioDuration(event.target.duration);\r\n    });\r\n    console.log(\"wordAudioDuration\", wordAudioDuration * 1000);\r\n    return wordAudioDuration * 1000;\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(\"USE EFFECT\");\r\n    // loadAudioDuration();\r\n  });\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardContent>\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"textSecondary\"\r\n          gutterBottom\r\n        >\r\n          Word Meaning\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h2\">\r\n          {wordInfo.vocab_meaning} ({wordInfo.vocab_pos})\r\n          <Music\r\n            audioLink={`${MEDIA_BASE_URL_WORD}${parseAudio(\r\n              wordInfo.vocab_sound_local\r\n            )}`}\r\n          />\r\n        </Typography>\r\n        <br></br>\r\n\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"textSecondary\"\r\n          gutterBottom\r\n        >\r\n          Sample Sentence\r\n        </Typography>\r\n        <Typography variant=\"h5\" component=\"h2\">\r\n          {sentenceSegments[0]}\r\n          <b>\r\n            <u>{sentenceSegments[1]}</u>\r\n          </b>\r\n          {sentenceSegments[2]}\r\n          <Music\r\n            audioLink={`${MEDIA_BASE_URL_SENTENCE}${parseAudio(\r\n              wordInfo.sentence_sound_local\r\n            )}`}\r\n            delay={2500}\r\n          />\r\n        </Typography>\r\n        <br></br>\r\n\r\n        <Typography\r\n          className={classes.title}\r\n          color=\"textSecondary\"\r\n          gutterBottom\r\n        >\r\n          Sentence Meaning\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\">\r\n          {wordInfo.sentence_meaning}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","// https://stackoverflow.com/questions/32553158/detect-click-outside-react-component\r\n\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { isCompositeComponent } from \"react-dom/test-utils\";\r\n\r\nclass OutsideAlerter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\r\n  };\r\n\r\n  setWrapperRef = (node) => {\r\n    console.log(\"setWrapperRef\", node);\r\n    console.log(\"this\", this);\r\n    this.wrapperRef = node;\r\n  };\r\n\r\n  handleClickOutside = (event) => {\r\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\r\n      // for some reason, need setTimeout to work, even if 0 delay\r\n      setTimeout(() => {\r\n        this.props.focusInputBox();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <div ref={this.setWrapperRef}>{this.props.children}</div>;\r\n  }\r\n}\r\n\r\nOutsideAlerter.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n};\r\n\r\nexport default OutsideAlerter;\r\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport CharList from \"../components/CharList.js\";\nimport CharInput from \"../components/CharInput\";\nimport NavBar from \"../components/NavBar\";\nimport Hint from \"../components/Hint\";\nimport { Grid, Paper } from \"@material-ui/core\";\nimport { katakanaToRomaji } from \"../jap-char.js\";\nimport Signin from \"../components/Signin\";\nimport Register from \"../components/Register\";\nimport WordCard from \"../components/WordCard\";\nimport OutsideAlerter from \"../components/OutsideAlerter\";\nimport \"./App.css\";\nimport {\n  GETWORD_URL,\n  CHARSCORE_URL,\n  WORDSCORE_URL,\n  TOFUGU_LINK,\n  WORD_LINK,\n} from \"../constants\";\n\nimport {\n  typeAnswer,\n  pressSpace,\n  updateChar,\n  pressEnter,\n  typeWrongAnswer,\n  completeWord,\n  updateWord,\n  completeChar,\n} from \"../actions\";\n\nconst mapStateToProps = (state) => {\n  return {\n    userInput: state.changeInputBox.inputBox,\n    currentJapChar: state.changeCardState.currentJapChar,\n    currentRomaji: state.changeCardState.currentRomaji,\n    hintedCharList: state.changeCardState.hintedCharList,\n    wrongCharList: state.changeCardState.wrongCharList,\n    onIncorrectCard: state.changeCardState.onIncorrectCard,\n    curWrongChar: state.changeCardState.curWrongChar,\n    onHintedCard: state.changeCardState.onHintedCard,\n    wordCompleted: state.changeCardState.wordCompleted,\n    currentWord: state.changeCardState.currentWord,\n    charTimestamp: state.changeCardState.charTimestamp,\n    audioIsPlaying: state.changeGeneralState.audioIsPlaying,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onInputBoxChange: (event) => {\n      dispatch(typeAnswer(event.target.value));\n    },\n    setCurrentChar: (japchar, romaji) => {\n      dispatch(updateChar(japchar, romaji));\n    },\n    onEnterPress: (time) => {\n      dispatch(pressEnter(time));\n    },\n    onWrongInput: (userChar, currentChar) => {\n      dispatch(typeWrongAnswer(userChar, currentChar));\n    },\n    onSpacePress: (context) => {\n      dispatch(pressSpace(context));\n    },\n    onWordCompletion: () => {\n      dispatch(completeWord());\n    },\n    updateWord: (word) => {\n      dispatch(updateWord(word));\n    },\n    onCompleteChar: (time, type) => {\n      dispatch(completeChar(time, type));\n    },\n  };\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      route: \"signin\",\n      userInfo: {\n        id: \"\",\n        name: \"\",\n        email: \"\",\n        joined: \"\",\n      },\n      currentWordInfo: null,\n    };\n    this.charInputRef = React.createRef();\n  }\n\n  onRouteChange = (route) => {\n    this.setState({ route: route });\n  };\n\n  parseJapaneseWord = (word) => {\n    var charsToRead = [];\n    for (const c of word) {\n      var c_romaji = katakanaToRomaji[c] || \"??\";\n      charsToRead.push({ char: c, romaji: c_romaji });\n    }\n    return charsToRead;\n  };\n\n  convertTimeToScoreDelta = (charTimestamp) => {\n    return charTimestamp.map((item) => {\n      var score_delta = 20000 / item.time;\n      if (item.type === \"hinted\") {\n        score_delta *= -1;\n      }\n      return {\n        char: item.char,\n        score_delta: score_delta,\n      };\n    });\n  };\n\n  updateCharScore = (user_uid, scoreDeltaList) => {\n    fetch(CHARSCORE_URL, {\n      method: \"post\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        user_uid: user_uid,\n        charScoreDeltaList: scoreDeltaList,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(\"Update Char Score:\", data);\n      })\n      .catch((error) => {\n        console.log(\"Failed to update char score\", error);\n      });\n  };\n\n  updateWordScore = (user_uid, word) => {\n    fetch(WORDSCORE_URL, {\n      method: \"post\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        user_uid: user_uid,\n        word: word,\n        unix_time: this.state.currentWord_unix_time,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(\"Update Word Score:\", data);\n      })\n      .catch((error) => {\n        console.log(\"Failed to update word score\", error);\n      });\n  };\n\n  requestNewWord = () => {\n    fetch(GETWORD_URL, {\n      method: \"post\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        user_uid: this.state.userInfo.id,\n      }),\n    })\n      .then((res) => res.json())\n      .then((word) => {\n        var unix_time = Date.now();\n        this.props.updateWord(word.vocab_kana);\n        this.setState({ currentWordInfo: word });\n        this.setState({ currentWord_unix_time: unix_time });\n        console.log(\n          `Request new word: ${word.vocab_kana} at time ${unix_time}`\n        );\n        console.log(\n          \"CURRENT WORD CHEAT\",\n          this.parseJapaneseWord(word.vocab_kana)\n        );\n      })\n      .catch((err) => {\n        console.log(\"Error in getting next word\", err);\n      });\n  };\n\n  onSpecialKeyPress = (event) => {\n    const {\n      currentRomaji,\n      curWrongChar,\n      onIncorrectCard,\n      onHintedCard,\n      onSpacePress,\n      onEnterPress,\n      onInputBoxChange,\n      wordCompleted,\n      onCompleteChar,\n      charTimestamp,\n      currentWord,\n      audioIsPlaying,\n    } = this.props;\n\n    if (audioIsPlaying) {\n      event.preventDefault();\n      return;\n    }\n\n    if (onIncorrectCard || onHintedCard || wordCompleted) {\n      event.preventDefault();\n    }\n\n    // handle SPACE press\n    if (event.which === 32) {\n      event.preventDefault();\n      if (!onIncorrectCard && !onHintedCard && !wordCompleted) {\n        onSpacePress(\"REQUEST_HINT\");\n        onCompleteChar(Date.now(), \"hinted\");\n      } else if (onIncorrectCard) {\n        // remove wrong input\n        event.target.value = event.target.value.slice(0, -curWrongChar.length);\n        onInputBoxChange(event);\n        onSpacePress(\"CONTINUE_AFTER_ERROR\");\n      } else if (wordCompleted) {\n        this.props.updateWord(\"\");\n        const scoreDeltaList = this.convertTimeToScoreDelta(charTimestamp);\n        this.updateCharScore(this.state.userInfo.id, scoreDeltaList);\n        this.updateWordScore(this.state.userInfo.id, currentWord);\n        // temporary fix to ensure that updateWordScore is process before requestNewWord\n        setTimeout(() => {\n          this.requestNewWord();\n        }, 100);\n        onSpacePress(\"CONTINUE_AFTER_COMPLETE\");\n\n        event.target.value = \"\";\n        onInputBoxChange(event);\n      }\n    }\n\n    // handle ENTER press\n    if (event.which === 13) {\n      event.preventDefault();\n      if (onHintedCard) {\n        // autofill correct answer\n        event.target.value = event.target.value.concat(currentRomaji);\n        onInputBoxChange(event);\n        onEnterPress(Date.now());\n      }\n    }\n  };\n\n  loadUser = (user) => {\n    const { user_uid, name, email, joined } = user;\n    this.setState((prevState) => {\n      let userInfo = { ...prevState.userInfo };\n      userInfo.name = name;\n      userInfo.id = user_uid;\n      userInfo.email = email;\n      userInfo.joined = joined;\n      return { userInfo };\n    });\n    console.log(\"userInfo\", this.state.userInfo);\n    this.requestNewWord();\n  };\n\n  // refocus on inputbox when pressing ENTER or SPACE\n  keypressGlobalHandler = (event) => {\n    const { wordCompleted } = this.props;\n\n    if (this.state.route === \"home\") {\n      if (event.which === 32 || wordCompleted) {\n      }\n      if (event.which === 32 || event.which === 13) {\n        event.preventDefault();\n        this.focusInputBox();\n      }\n    }\n  };\n\n  focusInputBox = () => {\n    console.log(\"focus input Box\", this);\n    this.charInputRef.current.formRef.current.focus();\n  };\n\n  componentDidMount() {\n    document.addEventListener(\"keypress\", this.keypressGlobalHandler);\n  }\n\n  showHint = () => {\n    if (this.props.onHintedCard) {\n      return <Hint currentHintedChar={this.props.currentJapChar} />;\n    }\n  };\n\n  displayWordInfo = () => {\n    if (this.props.wordCompleted) {\n      return <WordCard wordInfo={this.state.currentWordInfo} />;\n    }\n  };\n\n  displayMessage = () => {\n    const {\n      onIncorrectCard,\n      wrongCharList,\n      curWrongChar,\n      onHintedCard,\n      wordCompleted,\n      audioIsPlaying,\n    } = this.props;\n\n    if (onIncorrectCard) {\n      const userWrongInput = wrongCharList[curWrongChar];\n      return (\n        <div>\n          <p>{`This character is not \"${userWrongInput}\"`}</p>\n          <p>press SPACE to try again</p>\n        </div>\n      );\n    } else if (onHintedCard && !audioIsPlaying) {\n      return <p>press ENTER to continue</p>;\n    } else if (wordCompleted && !audioIsPlaying) {\n      return <p>press SPACE to continue</p>;\n    } else if (!onHintedCard && !wordCompleted) {\n      return <p>You can press SPACE for hint</p>;\n    } else {\n      return <p></p>;\n    }\n  };\n\n  renderRoute = (route) => {\n    switch (route) {\n      case \"signin\":\n        return (\n          <Signin onRouteChange={this.onRouteChange} loadUser={this.loadUser} />\n        );\n      case \"register\":\n        return (\n          <Register\n            onRouteChange={this.onRouteChange}\n            loadUser={this.loadUser}\n          />\n        );\n      case \"home\":\n        const {\n          userInput,\n          onHintedCard,\n          setCurrentChar,\n          hintedCharList,\n          onWrongInput,\n          wrongCharList,\n          onIncorrectCard,\n          onWordCompletion,\n          currentWord,\n        } = this.props;\n\n        return (\n          <div>\n            <NavBar onRouteChange={this.onRouteChange} />\n            <div className=\"tmw5 center bg-white br3 pa1 ma1 ba b--black-10 o-40 tl\">\n              <Paper elevation={0} />\n              <p>Welcome, {this.state.userInfo.name}! </p>\n              <ul>\n                <li>\n                  Press SPACE to learn the character in the highlighted card\n                </li>\n                <li>\n                  Type the character as fast as you can if you've already known\n                  the character\n                </li>\n              </ul>\n            </div>\n\n            <Grid\n              container\n              direction=\"column\"\n              justify=\"center\"\n              alignItems=\"center\"\n            >\n              <Paper elevation={0} />\n              <OutsideAlerter focusInputBox={this.focusInputBox}>\n                <CharInput\n                  onInputChange={this.props.onInputBoxChange}\n                  onSpecialKeyPress={this.onSpecialKeyPress}\n                  ref={this.charInputRef}\n                />\n              </OutsideAlerter>\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"center\"\n                alignItems=\"center\"\n              >\n                <Grid item>\n                  <CharList\n                    charsToRead={this.parseJapaneseWord(currentWord)}\n                    userInput={userInput}\n                    hintDisplayOn={onHintedCard}\n                    updateCurrentChar={setCurrentChar}\n                    hintedCharList={hintedCharList}\n                    onWrongInput={onWrongInput}\n                    wrongCharList={wrongCharList}\n                    onIncorrectCard={onIncorrectCard}\n                    onWordCompletion={onWordCompletion}\n                  />\n                </Grid>\n                <div>{this.displayMessage()}</div>\n                <Grid item>\n                  <Paper elevation={1} />\n                  {this.showHint()}\n                </Grid>\n                <div>{this.displayWordInfo()}</div>\n              </Grid>\n            </Grid>\n            <footer id=\"footer\">\n              <p>\n                Mnemonics taken from <a href={TOFUGU_LINK}>tofugu.com</a>\n              </p>\n              <p>\n                Japanese words taken from{\" \"}\n                <a href={WORD_LINK}>reddit.com/r/LearnJapanese</a>\n              </p>\n            </footer>\n          </div>\n        );\n      default:\n        return <div>Default</div>;\n    }\n  };\n\n  render() {\n    return <div className=\"tc\">{this.renderRoute(this.state.route)}</div>;\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { USER_INPUT } from \"./constants\";\r\n\r\nconst initialInputBox = {\r\n  inputBox: \"\",\r\n};\r\n\r\nconst initialGeneralState = {\r\n  audioIsPlaying: false,\r\n};\r\n\r\nconst initialCardState = {\r\n  currentJapChar: \"コ\",\r\n  currentRomaji: \"\",\r\n  hintedCharList: [],\r\n  wrongCharList: {},\r\n  onIncorrectCard: false,\r\n  curWrongChar: \"\",\r\n  onHintedCard: false,\r\n  wordCompleted: false,\r\n  currentWord: \"\",\r\n  prevTimestamp: null,\r\n  charTimestamp: [],\r\n  allCharTimestamp: [],\r\n};\r\n\r\nexport const changeGeneralState = (\r\n  state = initialGeneralState,\r\n  action = {}\r\n) => {\r\n  switch (action.type) {\r\n    case \"PLAY_AUDIO\":\r\n      return { ...state, audioIsPlaying: true };\r\n    case \"PAUSE_AUDIO\":\r\n      return { ...state, audioIsPlaying: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const changeInputBox = (state = initialInputBox, action = {}) => {\r\n  switch (action.type) {\r\n    case USER_INPUT:\r\n      return { ...state, inputBox: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const changeCardState = (state = initialCardState, action = {}) => {\r\n  switch (action.type) {\r\n    case \"CHAR_UPDATE\":\r\n      return {\r\n        ...state,\r\n        currentJapChar: action.currentJapChar,\r\n        currentRomaji: action.currentRomaji,\r\n      };\r\n    case \"ENTER_PRESS\":\r\n      return {\r\n        ...state,\r\n        hintedCharList: [...state.hintedCharList, state.currentRomaji],\r\n        onHintedCard: false,\r\n        prevTimestamp: action.time,\r\n      };\r\n    case \"WRONG_INPUT\":\r\n      state.wrongCharList[action.currentChar] = action.userInput;\r\n      return {\r\n        ...state,\r\n        onIncorrectCard: true,\r\n        curWrongChar: action.currentChar,\r\n      };\r\n    case \"SPACE_PRESS_TO_CONTINUE\":\r\n      return { ...state, onIncorrectCard: false };\r\n    case \"SPACE_PRESS_FOR_HINT\":\r\n      return { ...state, onHintedCard: true };\r\n    case \"SPACE_PRESS_TO_GO_NEXT\":\r\n      return {\r\n        ...state,\r\n        wordCompleted: false,\r\n        charTimestamp: [],\r\n        allCharTimestamp: [...state.allCharTimestamp, state.charTimestamp],\r\n        prevTimestamp: action.time,\r\n        hintedCharList: [],\r\n      };\r\n    case \"COMPLETE_WORD\":\r\n      return { ...state, wordCompleted: true };\r\n    case \"UPDATE_WORD\":\r\n      return { ...state, currentWord: action.payload };\r\n    case \"COMPLETE_CHAR\":\r\n      const newTimestamp = {\r\n        char: state.currentJapChar,\r\n        time: action.time - state.prevTimestamp,\r\n        type: action.completionType,\r\n      };\r\n      console.log(\"TIME STAMP\", newTimestamp);\r\n      return {\r\n        ...state,\r\n        charTimestamp: [...state.charTimestamp, newTimestamp],\r\n        prevTimestamp: action.time,\r\n      };\r\n    case \"SET_NEW_WORD_TIME\":\r\n      return { ...state, prevTimestamp: action.time };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, combineReducers, applyMiddleware } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"tachyons\";\nimport App from \"./containers/App.js\";\nimport {\n  changeGeneralState,\n  changeInputBox,\n  changeCardState,\n} from \"./reducers\";\n//import \"typeface-roboto\";\n\nconst rootReducer = combineReducers({\n  changeGeneralState,\n  changeInputBox,\n  changeCardState,\n});\nconst logger = createLogger();\n\nconst store = createStore(rootReducer, applyMiddleware(logger));\n// const store = createStore(rootReducer);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}