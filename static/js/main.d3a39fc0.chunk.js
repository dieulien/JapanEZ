(this["webpackJsonpjapanese-reading"]=this["webpackJsonpjapanese-reading"]||[]).push([[0],{32:function(e,a,t){},55:function(e,a,t){e.exports=t(68)},64:function(e,a,t){},66:function(e,a,t){},67:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(16),i=t.n(o),s=t(18),c=t(20),m=t(39);t(64),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(65);var u=t(5),l=t(40),p=t(9),h=t(10),d=t(12),g=t(11),E=(t(32),t(66),function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(){return Object(p.a)(this,t),a.apply(this,arguments)}return Object(h.a)(t,[{key:"render",value:function(){var e="tmw5 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10 ".concat(this.props.cardState);return r.a.createElement("div",{className:e},r.a.createElement("h1",{className:"char"},this.props.char))}}]),t}(r.a.Component)),f=t(88),j="https://localhost:3000/register",w="https://localhost:3000/signin",b="https://shrouded-harbor-11572.herokuapp.com/getwordinfo";j="https://shrouded-harbor-11572.herokuapp.com/register",w="https://shrouded-harbor-11572.herokuapp.com/signin";var C=function(e,a){return{type:"COMPLETE_CHAR",time:e,completionType:a}},v=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).componentDidMount=function(){var e=Date.now();n.props.setNewWordTime(e)},n.partitionCharIndex=function(e){var a=0;return e.map((function(e){return a+=e.length}))},n.decideCardState=function(e,a,t,r,o,i,s,c,m,u,l,p){var h="",d="",g=null,E=o[o.length-1];e.length>=o[r]&&((h=0===r?e.slice(0,o[r]):e.slice(o[r-1],o[r]))===t?(c.includes(t)?(d=d.concat(" hinted "),r>=n.props.charTimestamp.length&&n.props.onCompleteChar(Date.now(),"hinted")):(d=d.concat(" correct "),r>=n.props.charTimestamp.length&&n.props.onCompleteChar(Date.now(),"correct")),e.length>=E&&r===o.length-1&&p()):(d=d.concat(" incorrect "),m(h,t)));for(var f=0;f<o.length;f++)if(e.length<o[f]){r===(g=l?f-1:f)&&(d=d.concat(" highlighted "),s(a,t));break}return i&&r!==g&&(d=d.concat(" o-30 ")),d},n.state={dispatchTime:0},n}return Object(h.a)(t,[{key:"render",value:function(){var e=this,a=this.props.charsToRead.map((function(e){return e.romaji})),t=this.partitionCharIndex(a),n=this.props.charsToRead.map((function(a,n){return r.a.createElement(f.a,{item:!0,key:n},r.a.createElement(E,{char:a.char,key:n,cardState:e.decideCardState(e.props.userInput,a.char,a.romaji,n,t,e.props.hintDisplayOn,e.props.updateCurrentChar,e.props.hintedCharList,e.props.onWrongInput,e.props.wrongCharList,e.props.onIncorrectCard,e.props.onWordCompletion)}))}));return r.a.createElement(f.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:"1"},n)}}]),t}(r.a.Component),k=Object(s.b)((function(e){return{charTimestamp:e.changeCardState.charTimestamp}}),(function(e){return{onCompleteChar:function(a,t){e(C(a,t))},setNewWordTime:function(a){e(function(e){return{type:"SET_NEW_WORD_TIME",time:e}}(a))}}}))(v),y=t(99),O=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).formRef=r.a.createRef(),n}return Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement(y.a,{placeholder:"Start typing here...",inputProps:{"aria-label":"description"},onChange:this.props.onInputChange,onKeyDown:this.props.onSpecialKeyPress,autoFocus:!0,inputRef:this.formRef}))}}]),t}(r.a.Component),T=t(90),I=t(91),S=t(92),R=t(93),H=function(e){var a=e.onRouteChange;return r.a.createElement("div",null,r.a.createElement(T.a,{position:"static"},r.a.createElement(I.a,null,r.a.createElement(S.a,{variant:"title",color:"inherit"},"Learn Hiragana Non-stop"),r.a.createElement(R.a,{color:"inherit",onClick:function(){return a("signin")},className:"f3 link dim black underline pa3 pointer"},"Signout"))))},L=t(94),N=t(95),A=t(96),_=t(98),P=t(97),W=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={play:!1,audio:new Audio("".concat(e.props.audioLink))},e.togglePlay=function(){e.setState({play:!e.state.play},(function(){e.state.play?e.state.audio.play():e.state.audio.pause()}))},e}return Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.audio.addEventListener("ended",(function(){return e.setState({play:!1})})),setTimeout((function(){e.state.audio.play()}),this.props.delay)}},{key:"componentWillUnmount",value:function(){var e=this;this.state.audio.removeEventListener("ended",(function(){return e.setState({play:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R.a,{variant:"contained",color:"primary",onClick:this.togglePlay},this.state.play?"Pause Audio":"Play Audio"))}}]),t}(r.a.Component),z={"\u30a2":"a","\u30a4":"i","\u30a6":"u","\u30a8":"e","\u30aa":"o","\u30ab":"ka","\u30ad":"ki","\u30af":"ku","\u30b1":"ke","\u30b3":"ko","\u30b5":"sa","\u30b7":"shi","\u30b9":"su","\u30bb":"se","\u30bd":"so","\u30bf":"ta","\u30c1":"chi","\u30c4":"tsu","\u30c6":"te","\u30c8":"to","\u30ca":"na","\u30cb":"ni","\u30cc":"nu","\u30cd":"ne","\u30ce":"no","\u30cf":"ha","\u30d2":"hi","\u30d5":"fu","\u30d8":"he","\u30db":"ho","\u30de":"ma","\u30df":"mi","\u30e0":"mu","\u30e1":"me","\u30e2":"mo","\u30e4":"ya","\u30e6":"yu","\u30e8":"yo","\u30e9":"ra","\u30ea":"ri","\u30eb":"ru","\u30ec":"re","\u30ed":"ro","\u30ef":"wa","\u30f2":"wo","\u30f3":"n"},D={"\u30a2":{romaji:"a",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A2.jpg",shortHint:"Find the capital 'A'"},"\u30a4":{romaji:"i",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A4.jpg",shortHint:"It looks like an <u>ea</u>gle (i)"},"\u30a6":{romaji:"u",imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AB.jpg",shortHint:"\u30a6 looks like \u3046 (u)"},"\u30a8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%A8.jpg",shortHint:"Imagine this is the girders an <u>e</u> engineer would use to build buildings"},"\u30aa":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AA.jpg",shortHint:'A dude flapping open his trench coat to flash you. "<u>Oh</u> MY GOD!" you say. '},"\u30ab":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AB.jpg",shortHint:"It looks just like the Hiragana \u304b"},"\u30ad":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AD.jpg",shortHint:"A key (ki)"},"\u30af":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%AF.jpg",shortHint:"A long <u>coo</u>ks's (ku) hat"},"\u30b1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B1.jpg",shortHint:"It looks like the letter <u>K</u> (ke)"},"\u30b3":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B3.jpg",shortHint:"Two 90 degrees <u>co</u>rners (ko)"},"\u30b5":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B5.jpg",shortHint:"Three <u>sa</u>rdines stacked on top of each other"},"\u30b7":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B7.jpg",shortHint:"<u>She</u> has a very werid face (shi)"},"\u30b9":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%B9.jpg",shortHint:"A hanger where you hang up your fancy <u>su</u>it (su)"},"\u30bb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BB.jpg",shortHint:"It looks like the Hiragana \u305b"},"\u30bd":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BD.jpg",shortHint:"One needle and a long thread which you use to <u>sew</u> (so)"},"\u30bf":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%82%BF.jpg",shortHint:"A <u>ti</u>dal wave racing across the sea (ta)"},"\u30c1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%81.jpg",shortHint:"A <u>chee</u>rleader doing a <u>chee</u>r (chi)"},"\u30c4":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%84.jpg",shortHint:"<u>Two</u> (tsu) needles"},"\u30c6":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%86.jpg",shortHint:"A <u>te</u>lephone pole"},"\u30c8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%88.jpg",shortHint:"A <u>to</u>tem pole"},"\u30ca":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8A.jpg",shortHint:"A majestic <u>na</u>rwhal"},"\u30cb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8B.jpg",shortHint:"Two <u>nee</u>dles (ni) laying on their side"},"\u30cc":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8C.jpg",shortHint:"The chopsticks are grabbing onto some <u>noo</u>dles & pulling them out of a bowl. (nu)"},"\u30cd":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8D.jpg",shortHint:"A <u>ne</u>cromancer has summoned this zombie"},"\u30ce":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8E.jpg",shortHint:"A really long <u>no</u>se"},"\u30cf":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%8F.jpg",shortHint:"A rice paddy <u>ha</u>t"},"\u30d2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%92.jpg",shortHint:"<u>He</u> (hi) has no head. <u>He</u> is reaching out to you."},"\u30d5":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%95.jpg",shortHint:"A <u>fu</u>nny looking owl"},"\u30d8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%98.jpg",shortHint:"This looks like the Hiragana \u3078"},"\u30db":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9B.jpg",shortHint:"A <u>ho</u>ly cross"},"\u30de":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9E.jpg",shortHint:"Look at all those angles! Those lengths! All that <u>ma</u>th!"},"\u30df":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%9F.jpg",shortHint:"Three <u>mi</u>ssiles, flying towards you. Be careful!"},"\u30e0":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A0.jpg",shortHint:"It is shaped like a pile of poop. Cow poop. <u>Moo</u>. (mu)"},"\u30e1":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A1.jpg",shortHint:'\u3081 <u>Me</u> is Japnese for "eye"'},"\u30e2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A2.jpg",shortHint:"This looks like the Hiragana \u3082"},"\u30e4":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A4.jpg",shortHint:"This looks just like the Hiragana \u3084"},"\u30e6":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A6.jpg",shortHint:"You (yu) have a hook for a hand"},"\u30e8":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A8.jpg",shortHint:"A <u>yo</u>gurt containers"},"\u30e9":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%A9.jpg",shortHint:"It is a <u>ra</u>ptor wearing sweet <u>ra</u>y-bans"},"\u30ea":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AA.jpg",shortHint:"It looks like the Hiragana \u308a"},"\u30eb":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AB.jpg",shortHint:"There are two <u>rou</u>tes (ru) you can take. Route 1 & Route 2."},"\u30ec":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AC.jpg",shortHint:"Look at that beautiful <u>re</u>d hair that <u>Re</u>i has!"},"\u30ed":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AD.jpg",shortHint:"This <u>ro</u>ad goes around in a square, never ending. What a terrible <u>ro</u>ad this is."},"\u30ef":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%AF.jpg",shortHint:"You often begin your question with the word <u>wha</u>t (wa). <u>Wha</u>t are you doing?"},"\u30f2":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B2.jpg",shortHint:"A dog <u>wo</u>ofing (wo) so hard its tongue is flying out"},"\u30f3":{imageLink:"https://s3.amazonaws.com/image.japanesereading.com/%E3%83%B3.jpg",shortHint:"This guy only has one eye. <u>N</u>oooo!"}},B=Object(L.a)({root:{maxWidth:320},media:{height:200}});function U(e){var a=e.currentHintedChar,t=B(),n=z[a],o=D[a].shortHint.replace(/<\/?u>/g,",").split(",");return r.a.createElement(N.a,{className:t.root},r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.media,component:"img",alt:"Hint for character",image:D[a].imageLink,title:"Hint for character"}),r.a.createElement(_.a,null,r.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},o[0],r.a.createElement("u",null,o[1]),o[2]),r.a.createElement("br",null),r.a.createElement(W,{audioLink:"https://s3.amazonaws.com/media.japanesereading.com/character-sound/kanasound-"+n+".mp3"}))))}var M=t(45),x=(t(67),function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).onEmailInput=function(e){n.setState({signInEmail:e.target.value})},n.onPasswordInput=function(e){n.setState({signInPassword:e.target.value})},n.onSignIn=function(e){e.preventDefault();var a=n.state,t=a.signInEmail,r=a.signInPassword;fetch(w,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})}).then((function(e){return e.json()})).then((function(e){4===Object.keys(e).length?(n.props.loadUser(e),n.props.onRouteChange("home")):console.log("Login Failed",e)})).catch((function(e){console.log("Error!",e)}))},n.state={signInEmail:"",signInPassword:""},n}return Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("article",{className:"br3 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw5 center shadow-2"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("form",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailInput,autoFocus:!0})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordInput}))),r.a.createElement("div",{className:""},r.a.createElement("input",{onClick:this.onSignIn,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"})),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{className:"f6 link dim black db pointer",onClick:function(){return e.props.onRouteChange("register")}},"Register")))))}}]),t}(r.a.Component)),F=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).onNameInput=function(e){n.setState({name:e.target.value})},n.onEmailInput=function(e){n.setState({email:e.target.value})},n.onPasswordInput=function(e){n.setState({password:e.target.value})},n.onFormSubmit=function(e){e.preventDefault();var a=n.state,t=a.name,r=a.email,o=a.password;fetch(j,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:r,password:o})}).then((function(e){return e.json()})).then((function(e){4===Object.keys(e).length&&(n.props.loadUser(e),n.props.onRouteChange("home"))})).catch((function(e){console.log("Error!",e)}))},n.state={name:"",email:"",password:""},n}return Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("article",{className:"br3 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw6 center shadow-2"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("form",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Register"),r.a.createElement("div",null,r.a.createElement("label",{className:"db fw6 lh-copy f6",for:"name"},"Name"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"name",name:"name",id:"name",onChange:this.onNameInput})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",for:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailInput})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",for:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordInput}))),r.a.createElement("div",{className:""},r.a.createElement("input",{onClick:this.onFormSubmit,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{className:"f6 link dim black db pointer",onClick:function(){return e.props.onRouteChange("signin")}},"Sign in")))))}}]),t}(r.a.Component),J=Object(L.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function G(e){var a=e.wordInfo,t=J();t.bullet;document.createElement("html").innerHTML="<b>bolded text</b>";var n=a.sentence_expression.replace(/<\/?b>/g,",").split(","),o=function(e){return e.slice(7,e.length-1)};return r.a.createElement(N.a,{className:t.root},r.a.createElement(_.a,null,r.a.createElement(S.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Word Meaning"),r.a.createElement(S.a,{variant:"h5",component:"h2"},a.vocab_meaning," (",a.vocab_pos,")",r.a.createElement(W,{audioLink:"".concat("https://s3.amazonaws.com/media.japanesereading.com/word-sound/").concat(o(a.vocab_sound_local))})),r.a.createElement("br",null),r.a.createElement(S.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Sample Sentence"),r.a.createElement(S.a,{variant:"h5",component:"h2"},n[0],r.a.createElement("b",null,r.a.createElement("u",null,n[1])),n[2],r.a.createElement(W,{audioLink:"".concat("https://s3.amazonaws.com/media.japanesereading.com/sentence-sound/").concat(o(a.sentence_sound_local)),delay:3e3})),r.a.createElement(S.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Sentence Meaning"),r.a.createElement(S.a,{variant:"body2",component:"p"},a.sentence_meaning)))}var K=function(e){Object(d.a)(t,e);var a=Object(g.a)(t);function t(e){var n;return Object(p.a)(this,t),(n=a.call(this,e)).onRouteChange=function(e){n.setState({route:e})},n.parseJapaneseWord=function(e){var a,t=[],n=Object(l.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value,o=z[r]||"??";t.push({char:r,romaji:o})}}catch(i){n.e(i)}finally{n.f()}return t},n.convertTimeToScoreDelta=function(e){return e.map((function(e){var a=2e4/e.time;return"hinted"===e.type&&(a*=-1),{char:e.char,score_delta:a}}))},n.updateCharScore=function(e,a){fetch("https://shrouded-harbor-11572.herokuapp.com/charscore",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:e,charScoreDeltaList:a})}).then((function(e){return e.json()})).then((function(e){console.log("update success",e)})).catch((function(e){console.log("Failed to update char score",e)}))},n.onSpecialKeyPress=function(e){var a=n.props,t=a.currentRomaji,r=a.curWrongChar,o=a.onIncorrectCard,i=a.onHintedCard,s=a.onSpacePress,c=a.onEnterPress,m=a.onInputBoxChange,u=a.wordCompleted,l=a.updateWord,p=a.onCompleteChar,h=a.charTimestamp;if((o||i||u)&&e.preventDefault(),32===e.which)if(e.preventDefault(),o||i||u){if(o)e.target.value=e.target.value.slice(0,-r.length),m(e),s("CONTINUE_AFTER_ERROR");else if(u){fetch(b,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){l(e.vocab_kana),n.setState({currentWordInfo:e}),console.log("CURRENT WORD CHEAT",n.parseJapaneseWord(e.vocab_kana))})).catch((function(e){console.log("Error in getting next word",e)}));var d=n.convertTimeToScoreDelta(h);n.updateCharScore(n.state.userInfo.id,d),s("CONTINUE_AFTER_COMPLETE"),e.target.value="",m(e)}}else s("REQUEST_HINT"),p(Date.now(),"hinted");13===e.which&&(e.preventDefault(),i&&(e.target.value=e.target.value.concat(t),m(e),c(Date.now())))},n.loadUser=function(e){var a=e.user_uid,t=e.name,r=e.email,o=e.joined;n.setState((function(e){var n=Object(u.a)({},e.userInfo);return n.name=t,n.id=a,n.email=r,n.joined=o,{userInfo:n}})),console.log("userInfo",n.state.userInfo)},n.keypressGlobalHandler=function(e){"home"===n.state.route&&(32!==e.which&&13!==e.which||(e.preventDefault(),n.charInputRef.current.formRef.current.focus()))},n.showHint=function(){if(n.props.onHintedCard)return r.a.createElement(U,{currentHintedChar:n.props.currentJapChar})},n.displayWordInfo=function(){if(n.props.wordCompleted)return r.a.createElement(G,{wordInfo:n.state.currentWordInfo})},n.displayMessage=function(){var e=n.props,a=e.onIncorrectCard,t=e.wrongCharList,o=e.curWrongChar,i=e.onHintedCard,s=e.wordCompleted;if(a){var c=t[o];return r.a.createElement("div",null,r.a.createElement("p",null,'This character is not "'.concat(c,'"')),r.a.createElement("p",null,"press SPACE to try again"))}return i?r.a.createElement("p",null,"press ENTER to continue"):s?r.a.createElement("p",null,"press SPACE to continue"):void 0},n.renderRoute=function(e){switch(e){case"signin":return r.a.createElement(x,{onRouteChange:n.onRouteChange,loadUser:n.loadUser});case"register":return r.a.createElement(F,{onRouteChange:n.onRouteChange,loadUser:n.loadUser});case"home":var a=n.props,t=a.userInput,o=a.onHintedCard,i=a.setCurrentChar,s=a.hintedCharList,c=a.onWrongInput,m=a.wrongCharList,u=a.onIncorrectCard,l=a.onWordCompletion,p=a.currentWord;return r.a.createElement("div",null,r.a.createElement(H,{onRouteChange:n.onRouteChange}),r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(M.a,{elevation:0}),r.a.createElement("h1",null,"Learn Hiragana on the go"),r.a.createElement("h1",null,"User: ",n.state.userInfo.name," "),r.a.createElement(O,{onInputChange:n.props.onInputBoxChange,onSpecialKeyPress:n.onSpecialKeyPress,ref:n.charInputRef}),r.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(f.a,{item:!0},r.a.createElement(k,{charsToRead:n.parseJapaneseWord(p),userInput:t,hintDisplayOn:o,updateCurrentChar:i,hintedCharList:s,onWrongInput:c,wrongCharList:m,onIncorrectCard:u,onWordCompletion:l})),r.a.createElement("div",null,n.displayMessage()),r.a.createElement(f.a,{item:!0},r.a.createElement(M.a,{elevation:1}),n.showHint()),r.a.createElement("div",null,n.displayWordInfo()))));default:return r.a.createElement("div",null,"Default")}},n.state={route:"signin",userInfo:{id:"",name:"",email:"",joined:""},currentWordInfo:null},n.charInputRef=r.a.createRef(),n}return Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keypress",this.keypressGlobalHandler),fetch(b,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(a){e.setState({currentWordInfo:a}),e.props.updateWord(a.vocab_kana),console.log("CURRENT WORD CHEAT",e.parseJapaneseWord(a.vocab_kana))})).catch((function(e){console.log("Error in getting first word",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"tc"},this.renderRoute(this.state.route))}}]),t}(n.Component),Y=Object(s.b)((function(e){return{userInput:e.changeInputBox.inputBox,currentJapChar:e.changeCardState.currentJapChar,currentRomaji:e.changeCardState.currentRomaji,hintedCharList:e.changeCardState.hintedCharList,wrongCharList:e.changeCardState.wrongCharList,onIncorrectCard:e.changeCardState.onIncorrectCard,curWrongChar:e.changeCardState.curWrongChar,onHintedCard:e.changeCardState.onHintedCard,wordCompleted:e.changeCardState.wordCompleted,currentWord:e.changeCardState.currentWord,charTimestamp:e.changeCardState.charTimestamp}}),(function(e){return{onInputBoxChange:function(a){e({type:"USER_INPUT",payload:a.target.value})},setCurrentChar:function(a,t){e(function(e,a){return{type:"CHAR_UPDATE",currentJapChar:e,currentRomaji:a}}(a,t))},onEnterPress:function(a){e(function(e){return{type:"ENTER_PRESS",time:e}}(a))},onWrongInput:function(a,t){e(function(e,a){return{type:"WRONG_INPUT",userInput:e,currentChar:a,time:Date.now()}}(a,t))},onSpacePress:function(a){e(function(e){switch(e){case"REQUEST_HINT":return{type:"SPACE_PRESS_FOR_HINT",time:Date.now()};case"CONTINUE_AFTER_ERROR":return{type:"SPACE_PRESS_TO_CONTINUE",time:Date.now()};case"CONTINUE_AFTER_COMPLETE":return{type:"SPACE_PRESS_TO_GO_NEXT",time:Date.now()};default:return{type:"SPACE_PRESS"}}}(a))},onWordCompletion:function(){e({type:"COMPLETE_WORD",time:Date.now()})},updateWord:function(a){e(function(e){return{type:"UPDATE_WORD",payload:e}}(a))},onCompleteChar:function(a,t){e(C(a,t))}}}))(K),q=t(30),Q={inputBox:""},X={currentJapChar:"",currentRomaji:"",hintedCharList:[],wrongCharList:{},onIncorrectCard:!1,curWrongChar:"",onHintedCard:!1,wordCompleted:!1,currentWord:"",prevTimestamp:null,charTimestamp:[],allCharTimestamp:[]},$=Object(c.c)({changeInputBox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"USER_INPUT":return Object(u.a)(Object(u.a)({},e),{},{inputBox:a.payload});default:return e}},changeCardState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"CHAR_UPDATE":return Object(u.a)(Object(u.a)({},e),{},{currentJapChar:a.currentJapChar,currentRomaji:a.currentRomaji});case"ENTER_PRESS":return Object(u.a)(Object(u.a)({},e),{},{hintedCharList:[].concat(Object(q.a)(e.hintedCharList),[e.currentRomaji]),onHintedCard:!1,prevTimestamp:a.time});case"WRONG_INPUT":return e.wrongCharList[a.currentChar]=a.userInput,Object(u.a)(Object(u.a)({},e),{},{onIncorrectCard:!0,curWrongChar:a.currentChar});case"SPACE_PRESS_TO_CONTINUE":return Object(u.a)(Object(u.a)({},e),{},{onIncorrectCard:!1});case"SPACE_PRESS_FOR_HINT":return Object(u.a)(Object(u.a)({},e),{},{onHintedCard:!0});case"SPACE_PRESS_TO_GO_NEXT":return Object(u.a)(Object(u.a)({},e),{},{wordCompleted:!1,charTimestamp:[],allCharTimestamp:[].concat(Object(q.a)(e.allCharTimestamp),[e.charTimestamp]),prevTimestamp:a.time,hintedCharList:[]});case"COMPLETE_WORD":return Object(u.a)(Object(u.a)({},e),{},{wordCompleted:!0});case"UPDATE_WORD":return Object(u.a)(Object(u.a)({},e),{},{currentWord:a.payload});case"COMPLETE_CHAR":var t={char:e.currentJapChar,time:a.time-e.prevTimestamp,type:a.completionType};return console.log("TIME STAMP",t),Object(u.a)(Object(u.a)({},e),{},{charTimestamp:[].concat(Object(q.a)(e.charTimestamp),[t]),prevTimestamp:a.time});case"SET_NEW_WORD_TIME":return Object(u.a)(Object(u.a)({},e),{},{prevTimestamp:a.time});default:return e}}}),V=Object(m.createLogger)(),Z=Object(c.d)($,Object(c.a)(V));i.a.render(r.a.createElement(s.a,{store:Z},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.d3a39fc0.chunk.js.map